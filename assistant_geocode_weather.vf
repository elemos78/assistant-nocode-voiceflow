{
  "version": {
    "name": "Initial Version",
    "topics": [
      {
        "sourceID": "6552806214b35500124bdae9",
        "type": "DIAGRAM"
      }
    ],
    "_version": 5,
    "creatorID": 299371,
    "prototype": {
      "type": "chat",
      "data": {
        "name": "CustomGPT Assistant",
        "locales": [
          "en-US"
        ]
      },
      "model": {
        "intents": [],
        "slots": []
      },
      "context": {
        "stack": [
          {
            "diagramID": "6552806214b35500124bdae9",
            "storage": {},
            "variables": {}
          }
        ],
        "variables": {}
      },
      "surveyorContext": {
        "slotsMap": {},
        "platform": "webchat",
        "products": {},
        "extraSlots": [],
        "interfaces": [],
        "permissions": [],
        "extraIntents": [],
        "usedEventsSet": [],
        "usedIntentsSet": [],
        "goToIntentsSet": [],
        "usedFunctionsMap": {}
      },
      "settings": {},
      "platform": "webchat"
    },
    "variables": [
      "sessions",
      "user_id",
      "timestamp",
      "platform",
      "locale",
      "apiKey",
      "assistantID",
      "threadID",
      "runID",
      "runStatus",
      "messageID",
      "assistantReply",
      "counter",
      "functionName",
      "functionParams",
      "functionParamsText",
      "search_text",
      "lat",
      "lon",
      "responseAPI",
      "tool_call_id",
      "body",
      "responseToolOutput",
      "apiMapBox",
      "apiOpenWeather"
    ],
    "components": [
      {
        "type": "DIAGRAM",
        "sourceID": "6552a040c84699fa1952cf58"
      }
    ],
    "manualSave": false,
    "platformData": {
      "slots": [],
      "intents": [
        {
          "key": "VF.YES",
          "name": "VF.YES",
          "slots": [],
          "inputs": [],
          "noteID": null
        },
        {
          "key": "VF.NO",
          "name": "VF.NO",
          "slots": [],
          "inputs": [],
          "noteID": null
        },
        {
          "key": "None",
          "name": "None",
          "slots": [],
          "inputs": [],
          "noteID": null
        }
      ],
      "settings": {
        "restart": true,
        "repeat": 100,
        "locales": [
          "en-US"
        ]
      },
      "publishing": {
        "avatar": "https://cdn.voiceflow.com/assets/logo.png",
        "color": "#2E7FF1",
        "description": "Our virtual assistant is here to help you.",
        "feedback": false,
        "image": "https://cdn.voiceflow.com/assets/logo.png",
        "persistence": "localStorage",
        "position": "right",
        "spacing": {
          "side": 24,
          "bottom": 24
        },
        "title": "Starting Template - Webchat",
        "watermark": true
      },
      "platform": "webchat"
    },
    "canvasTemplates": [
      {
        "id": "sg9zy34i0",
        "name": "Basic Conversation Path",
        "color": "#5b9fd7",
        "nodeIDs": [
          "643872d482cf9d2273b905df",
          "643872d482cf9d2273b905e1",
          "643872d482cf9d2273b905e3"
        ]
      },
      {
        "id": "5bgq3341p",
        "name": "Save Information",
        "color": "#000000",
        "nodeIDs": [
          "6438784f82cf9d2273b90dd4",
          "6438784f82cf9d2273b90dd6",
          "6438784f82cf9d2273b90dd8",
          "6438784f82cf9d2273b90dda"
        ]
      },
      {
        "id": "byav33785",
        "name": "API Call Example",
        "color": null,
        "nodeIDs": [
          "645d718f83103cca7a3cecc1",
          "645d718f83103cca7a3cecc3",
          "645d718f83103cca7a3cecc5",
          "645d718f83103cca7a3cecc7"
        ]
      },
      {
        "id": "hg2s338pr",
        "name": "Assistant API",
        "color": null,
        "nodeIDs": [
          "65529b445324bea305b93182"
        ]
      }
    ],
    "autoSaveFromRestore": false,
    "_id": "659755d05643e2ffb19c1381",
    "updatedAt": "2024-01-05T01:05:20.484Z",
    "domains": [
      {
        "id": "cla06iyr900b206pkh8d4ap8n",
        "name": "Home",
        "live": true,
        "topicIDs": [
          "6552806214b35500124bdae9"
        ],
        "rootDiagramID": "6552806214b35500124bdae9",
        "updatedBy": 299371,
        "updatedAt": "2024-01-08T00:00:40.224Z"
      }
    ],
    "projectID": "659755d05643e2ffb19c1380",
    "rootDiagramID": "6552806214b35500124bdae9",
    "templateDiagramID": "65529a03d6a5c403cd0dd560"
  },
  "diagrams": {
    "6552a040c84699fa1952cf58": {
      "name": "Call AssistantAPI",
      "type": "COMPONENT",
      "zoom": 100,
      "nodes": {
        "6552a0405324bea305b9321e": {
          "type": "start",
          "nodeID": "6552a0405324bea305b9321e",
          "coords": [
            360,
            120
          ],
          "data": {
            "name": "Continue",
            "color": "#43494E",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "id": "6552a0405324bea305b9321f",
                  "type": "next",
                  "target": "65529b4a5324bea305b93184",
                  "data": {
                    "points": [
                      {
                        "point": [
                          440,
                          142
                        ]
                      },
                      {
                        "point": [
                          565,
                          142
                        ]
                      },
                      {
                        "point": [
                          565,
                          70.83
                        ]
                      },
                      {
                        "point": [
                          690,
                          70.83
                        ],
                        "allowedToTop": true
                      }
                    ]
                  }
                }
              },
              "dynamic": []
            },
            "steps": []
          }
        },
        "65529b4a5324bea305b93184": {
          "type": "block",
          "data": {
            "name": "Add message to thread",
            "color": "#5b9fd7",
            "steps": [
              "65529b4a5324bea305b93186"
            ]
          },
          "nodeID": "65529b4a5324bea305b93184",
          "coords": [
            855,
            43.82829687585945
          ]
        },
        "65529c6d5324bea305b9319e": {
          "type": "block",
          "data": {
            "name": "Retrieve Thread",
            "color": "#5b9fd7",
            "steps": [
              "65529c6d5324bea305b931a0"
            ]
          },
          "nodeID": "65529c6d5324bea305b9319e",
          "coords": [
            1673.75,
            42.57829687585945
          ]
        },
        "65529d825324bea305b931b4": {
          "type": "block",
          "data": {
            "name": "Poll to see if run complete",
            "color": "#bf87ce",
            "steps": [
              "65529d825324bea305b931b1"
            ]
          },
          "nodeID": "65529d825324bea305b931b4",
          "coords": [
            2087.5,
            36.01579687585945
          ]
        },
        "65529ee15324bea305b931e5": {
          "type": "block",
          "data": {
            "name": "Get Message ID",
            "color": "#5b9fd7",
            "steps": [
              "65529ee15324bea305b931e7"
            ]
          },
          "nodeID": "65529ee15324bea305b931e5",
          "coords": [
            2524.134837479323,
            33.669876678996616
          ]
        },
        "65529fde5324bea305b93207": {
          "type": "block",
          "data": {
            "name": "Get Message ID copy",
            "color": "#5b9fd7",
            "steps": [
              "65529fde5324bea305b93203"
            ]
          },
          "nodeID": "65529fde5324bea305b93207",
          "coords": [
            2910.3848624611373,
            28.919726867675763
          ]
        },
        "65529b4a5324bea305b93186": {
          "type": "api",
          "data": {
            "name": "",
            "url": "https://api.openai.com/v1/threads/{{[threadID].threadID}}/messages",
            "body": [
              {
                "key": "",
                "val": ""
              }
            ],
            "params": [],
            "method": "POST",
            "headers": [
              {
                "key": "Content-Type",
                "val": "application/json"
              },
              {
                "key": "Authorization",
                "val": "Bearer {{[apiKey].apiKey}}"
              },
              {
                "key": "OpenAI-Beta",
                "val": "assistants=v1"
              }
            ],
            "content": "{\n      \"role\": \"user\",\n      \"content\": \"{last_utterance}\"\n    }",
            "mappings": [],
            "bodyType": "rawInput",
            "selectedAction": "Make a POST Request",
            "selectedIntegration": "Custom API",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "65529bf65324bea305b93191",
                  "id": "65529b4a5324bea305b93187",
                  "data": {
                    "points": [
                      {
                        "point": [
                          1021,
                          211.08
                        ]
                      },
                      {
                        "point": [
                          1051.75,
                          211.08
                        ]
                      },
                      {
                        "point": [
                          1051.75,
                          67.08
                        ]
                      },
                      {
                        "point": [
                          1082.5,
                          67.08
                        ],
                        "allowedToTop": true
                      }
                    ]
                  }
                },
                "fail": {
                  "type": "fail",
                  "target": null,
                  "id": "65529b4a5324bea305b93188"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "65529b4a5324bea305b93186"
        },
        "65529c6d5324bea305b931a0": {
          "type": "api",
          "data": {
            "name": "",
            "url": "https://api.openai.com/v1/threads/{{[threadID].threadID}}/runs/{{[runID].runID}}",
            "body": [
              {
                "key": "",
                "val": ""
              }
            ],
            "params": [],
            "method": "GET",
            "headers": [
              {
                "key": "Authorization",
                "val": "Bearer {{[apiKey].apiKey}}"
              },
              {
                "key": "OpenAI-Beta",
                "val": "assistants=v1"
              }
            ],
            "content": "",
            "mappings": [
              {
                "path": "response.status",
                "var": "runStatus"
              }
            ],
            "bodyType": "rawInput",
            "selectedAction": "Make a GET Request",
            "selectedIntegration": "Custom API",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "65529d825324bea305b931b1",
                  "id": "65529c6d5324bea305b931a1",
                  "data": {
                    "points": [
                      {
                        "point": [
                          1839.75,
                          209.83
                        ]
                      },
                      {
                        "point": [
                          1880.63,
                          209.83
                        ]
                      },
                      {
                        "point": [
                          1880.63,
                          115.02
                        ]
                      },
                      {
                        "point": [
                          1921.5,
                          115.02
                        ],
                        "allowedToTop": false
                      }
                    ]
                  }
                },
                "fail": {
                  "type": "fail",
                  "target": null,
                  "id": "65529c6d5324bea305b931a2"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "65529c6d5324bea305b931a0"
        },
        "65529d825324bea305b931b1": {
          "type": "ifV2",
          "data": {
            "name": "If",
            "expressions": [
              {
                "type": null,
                "name": "Completed",
                "value": [
                  {
                    "logicInterface": "variable",
                    "type": "equals",
                    "value": [
                      {
                        "type": "variable",
                        "value": "runStatus"
                      },
                      {
                        "type": "value",
                        "value": "completed"
                      }
                    ]
                  }
                ]
              },
              {
                "type": null,
                "name": "In Progress",
                "value": [
                  {
                    "logicInterface": "variable",
                    "type": "equals",
                    "value": [
                      {
                        "type": "variable",
                        "value": "runStatus"
                      },
                      {
                        "type": "value",
                        "value": "in_progress"
                      }
                    ]
                  }
                ]
              },
              {
                "type": null,
                "name": "Queued",
                "value": [
                  {
                    "logicInterface": "variable",
                    "type": "equals",
                    "value": [
                      {
                        "type": "variable",
                        "value": "runStatus"
                      },
                      {
                        "type": "value",
                        "value": "queued"
                      }
                    ]
                  }
                ]
              }
            ],
            "noMatch": {
              "type": "path",
              "pathName": "Other"
            },
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "else": {
                  "type": "else",
                  "target": "6552a199c3565f15f633fa49",
                  "id": "65529dd15324bea305b931bf",
                  "data": {
                    "points": [
                      {
                        "point": [
                          2253.5,
                          278.77
                        ]
                      },
                      {
                        "point": [
                          2277.5,
                          278.77
                        ]
                      },
                      {
                        "point": [
                          2277.5,
                          342.02
                        ]
                      },
                      {
                        "point": [
                          2094.8,
                          342.02
                        ]
                      },
                      {
                        "point": [
                          2094.8,
                          384.45
                        ],
                        "toTop": true,
                        "allowedToTop": true
                      }
                    ]
                  }
                }
              },
              "dynamic": [
                {
                  "type": "",
                  "target": "65529ee15324bea305b931e5",
                  "id": "65529d825324bea305b931b2",
                  "data": {
                    "points": [
                      {
                        "point": [
                          2253.5,
                          115.27
                        ]
                      },
                      {
                        "point": [
                          2306.32,
                          115.27
                        ]
                      },
                      {
                        "point": [
                          2306.32,
                          60.67
                        ]
                      },
                      {
                        "point": [
                          2359.13,
                          60.67
                        ],
                        "allowedToTop": true
                      }
                    ],
                    "event": {
                      "type": "Completed"
                    }
                  }
                },
                {
                  "type": "",
                  "target": "6552a199c3565f15f633fa49",
                  "id": "65529d9d5324bea305b931bb",
                  "data": {
                    "points": [
                      {
                        "point": [
                          2253.5,
                          169.77
                        ]
                      },
                      {
                        "point": [
                          2277.5,
                          169.77
                        ]
                      },
                      {
                        "point": [
                          2277.5,
                          342.02
                        ]
                      },
                      {
                        "point": [
                          2094.8,
                          342.02
                        ]
                      },
                      {
                        "point": [
                          2094.8,
                          384.45
                        ],
                        "toTop": true,
                        "allowedToTop": true
                      }
                    ]
                  }
                },
                {
                  "type": "",
                  "target": "6552a199c3565f15f633fa49",
                  "id": "65529da95324bea305b931bd",
                  "data": {
                    "points": [
                      {
                        "point": [
                          2253.5,
                          224.27
                        ]
                      },
                      {
                        "point": [
                          2277.5,
                          224.27
                        ]
                      },
                      {
                        "point": [
                          2277.5,
                          342.02
                        ]
                      },
                      {
                        "point": [
                          2094.8,
                          342.02
                        ]
                      },
                      {
                        "point": [
                          2094.8,
                          384.45
                        ],
                        "toTop": true,
                        "allowedToTop": true
                      }
                    ]
                  }
                }
              ]
            }
          },
          "nodeID": "65529d825324bea305b931b1"
        },
        "65529ee15324bea305b931e7": {
          "type": "api",
          "data": {
            "name": "",
            "url": "https://api.openai.com/v1/threads/{{[threadID].threadID}}/runs/{{[runID].runID}}/steps",
            "body": [],
            "params": [],
            "method": "GET",
            "headers": [
              {
                "key": "Content-Type",
                "val": "application/json"
              },
              {
                "key": "Authorization",
                "val": "Bearer {{[apiKey].apiKey}}"
              },
              {
                "key": "OpenAI-Beta",
                "val": "assistants=v1"
              }
            ],
            "content": "",
            "mappings": [
              {
                "path": "response.data[0].step_details.message_creation.message_id",
                "var": "messageID"
              }
            ],
            "bodyType": "formData",
            "selectedAction": "Make a GET Request",
            "selectedIntegration": "Custom API",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "65529fde5324bea305b93207",
                  "id": "65529ee15324bea305b931e8",
                  "data": {
                    "points": [
                      {
                        "point": [
                          2690.13,
                          200.92
                        ]
                      },
                      {
                        "point": [
                          2717.76,
                          200.92
                        ]
                      },
                      {
                        "point": [
                          2717.76,
                          55.92
                        ]
                      },
                      {
                        "point": [
                          2745.38,
                          55.92
                        ],
                        "allowedToTop": true
                      }
                    ]
                  }
                },
                "fail": {
                  "type": "fail",
                  "target": null,
                  "id": "65529ee15324bea305b931e9"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "65529ee15324bea305b931e7"
        },
        "65529fde5324bea305b93203": {
          "type": "api",
          "data": {
            "name": "",
            "url": "https://api.openai.com/v1/threads/{{[threadID].threadID}}/messages/{{[messageID].messageID}}",
            "body": [],
            "params": [],
            "method": "GET",
            "headers": [
              {
                "key": "Content-Type",
                "val": "application/json"
              },
              {
                "key": "Authorization",
                "val": "Bearer {{[apiKey].apiKey}}"
              },
              {
                "key": "OpenAI-Beta",
                "val": "assistants=v1"
              }
            ],
            "content": "",
            "mappings": [
              {
                "path": "response.content[0].text.value",
                "var": "assistantReply"
              }
            ],
            "bodyType": "formData",
            "selectedAction": "Make a GET Request",
            "selectedIntegration": "Custom API",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": null,
                  "id": "65529fde5324bea305b93204"
                },
                "fail": {
                  "type": "fail",
                  "target": null,
                  "id": "65529fde5324bea305b93205"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "65529fde5324bea305b93203"
        },
        "6552a12ac3565f15f633f973": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "tp19x38rl",
                "content": [
                  {
                    "children": [
                      {
                        "text": "Great Question! Let me think for a few seconds."
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": null,
                  "id": "6552a12ac3565f15f633f974"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "6552a12ac3565f15f633f973"
        },
        "6552a12ac3565f15f633f975": {
          "type": "block",
          "data": {
            "name": "Message user on first loop",
            "steps": [
              "6552a1e7c3565f15f633fa58",
              "6552a12ac3565f15f633f973",
              "6552a142c3565f15f633f97e"
            ],
            "color": ""
          },
          "nodeID": "6552a12ac3565f15f633f975",
          "coords": [
            2098.5515430989476,
            599.7037835270572
          ]
        },
        "6552a142c3565f15f633f97e": {
          "type": "captureV2",
          "data": {
            "name": "Capture",
            "intentScope": "GLOBAL",
            "capture": {
              "type": "query",
              "variable": "last_utterance"
            },
            "noReply": {
              "types": [
                "reprompt",
                "path"
              ],
              "timeout": 3,
              "pathName": "No reply",
              "randomize": false,
              "reprompts": [
                {
                  "id": "cloxgxro401bx3b78t47nrqpf",
                  "content": [
                    {
                      "children": [
                        {
                          "text": ""
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": null,
                  "id": "6552a142c3565f15f633f97f"
                },
                "else": {
                  "type": "else",
                  "target": null,
                  "id": "6552a142c3565f15f633f980"
                },
                "no-reply": {
                  "id": "6552a14ac3565f15f633f984",
                  "type": "no-reply",
                  "target": "65529c6d5324bea305b931a0",
                  "data": {
                    "points": [
                      {
                        "point": [
                          1932.5513628400124,
                          889.2038931092103
                        ],
                        "reversed": true
                      },
                      {
                        "point": [
                          1492.24,
                          889.2038931092103
                        ],
                        "locked": true
                      },
                      {
                        "point": [
                          1492.24,
                          121.57837132154451
                        ],
                        "locked": true
                      },
                      {
                        "point": [
                          1507.7499639722007,
                          121.57837132154451
                        ]
                      }
                    ]
                  }
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "6552a142c3565f15f633f97e"
        },
        "6552a199c3565f15f633fa46": {
          "type": "ifV2",
          "data": {
            "name": "If",
            "expressions": [
              {
                "type": null,
                "name": "First Loop",
                "value": [
                  {
                    "logicInterface": "variable",
                    "type": "equals",
                    "value": [
                      {
                        "type": "variable",
                        "value": "counter"
                      },
                      {
                        "type": "value",
                        "value": "0"
                      }
                    ]
                  }
                ]
              }
            ],
            "noMatch": {
              "type": "path",
              "pathName": "Later Loops"
            },
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "else": {
                  "id": "6552a1acc3565f15f633fa54",
                  "type": "else",
                  "target": "65529c6d5324bea305b931a0",
                  "data": {
                    "points": [
                      {
                        "point": [
                          1928.8,
                          518.2
                        ],
                        "reversed": true
                      },
                      {
                        "point": [
                          1884.28,
                          518.2
                        ]
                      },
                      {
                        "point": [
                          1884.28,
                          121.58
                        ]
                      },
                      {
                        "point": [
                          1839.75,
                          121.58
                        ],
                        "reversed": true,
                        "allowedToTop": false
                      }
                    ]
                  }
                }
              },
              "dynamic": [
                {
                  "type": "",
                  "target": "6552a12ac3565f15f633f975",
                  "id": "6552a199c3565f15f633fa47",
                  "data": {
                    "points": [
                      {
                        "point": [
                          2260.8,
                          463.7
                        ]
                      },
                      {
                        "point": [
                          2284.8,
                          463.7
                        ]
                      },
                      {
                        "point": [
                          2284.8,
                          575.7
                        ]
                      },
                      {
                        "point": [
                          2098.55,
                          575.7
                        ]
                      },
                      {
                        "point": [
                          2098.55,
                          599.7
                        ],
                        "toTop": true,
                        "allowedToTop": true
                      }
                    ]
                  }
                }
              ]
            }
          },
          "nodeID": "6552a199c3565f15f633fa46"
        },
        "6552a199c3565f15f633fa49": {
          "type": "block",
          "data": {
            "name": "Check loop",
            "steps": [
              "6552a199c3565f15f633fa46"
            ],
            "color": "#bf87ce"
          },
          "nodeID": "6552a199c3565f15f633fa49",
          "coords": [
            2094.8015430989476,
            384.4537835270572
          ]
        },
        "6552a1e7c3565f15f633fa58": {
          "type": "setV2",
          "data": {
            "name": "",
            "sets": [
              {
                "type": "advance",
                "variable": "counter",
                "expression": "{{[counter].counter}}+1"
              }
            ],
            "title": "Increase counter by one",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": null,
                  "id": "6552a1e7c3565f15f633fa59"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "6552a1e7c3565f15f633fa58"
        },
        "6553ee2e2b7ad7110d85bc56": {
          "type": "markup_text",
          "data": {
            "scale": 1,
            "rotate": 0,
            "content": [
              {
                "textAlign": "center",
                "children": [
                  {
                    "text": "Add user message to the thread"
                  }
                ]
              }
            ],
            "overrideWidth": 326,
            "backgroundColor": {
              "r": 197,
              "g": 231,
              "b": 246,
              "a": 1
            },
            "name": "Block"
          },
          "nodeID": "6553ee2e2b7ad7110d85bc56",
          "coords": [
            687.8016357421874,
            -41.046142578125
          ]
        },
        "6553ee3a2b7ad7110d85bc59": {
          "type": "markup_text",
          "data": {
            "scale": 1,
            "rotate": 0,
            "content": [
              {
                "textAlign": "center",
                "children": [
                  {
                    "text": "Run the thread"
                  }
                ]
              }
            ],
            "overrideWidth": 168,
            "backgroundColor": {
              "r": 197,
              "g": 231,
              "b": 246,
              "a": 1
            },
            "name": "Block"
          },
          "nodeID": "6553ee3a2b7ad7110d85bc59",
          "coords": [
            1151.5516357421875,
            -43.546142578125
          ]
        },
        "6553ee4b2b7ad7110d85bc5c": {
          "type": "markup_text",
          "data": {
            "scale": 1,
            "rotate": 0,
            "content": [
              {
                "textAlign": "center",
                "children": [
                  {
                    "text": "This checks to see if we have a response from GPT yet. Sometimes this takes up to 10 seconds."
                  }
                ]
              }
            ],
            "overrideWidth": 366.7500305175781,
            "backgroundColor": {
              "r": 197,
              "g": 231,
              "b": 246,
              "a": 1
            },
            "name": "Block"
          },
          "nodeID": "6553ee4b2b7ad7110d85bc5c",
          "coords": [
            1685.801513671875,
            -105.62869801348813
          ]
        },
        "6553ee7a2b7ad7110d85bc5f": {
          "type": "markup_text",
          "data": {
            "scale": 1,
            "rotate": 0,
            "content": [
              {
                "textAlign": "center",
                "children": [
                  {
                    "text": "Rather than just have chat bubble look like its typing for 10 seconds. We send the user a message to let them know that it might take a few seconds."
                  }
                ]
              },
              {
                "textAlign": "center",
                "children": [
                  {
                    "text": ""
                  }
                ]
              },
              {
                "textAlign": "center",
                "children": [
                  {
                    "text": "Here we use the no reply function to force a 3 second pause before checking if GPT is done. "
                  }
                ]
              }
            ],
            "overrideWidth": 394.0000915527344,
            "backgroundColor": {
              "r": 197,
              "g": 231,
              "b": 246,
              "a": 1
            },
            "name": "Block"
          },
          "nodeID": "6553ee7a2b7ad7110d85bc5f",
          "coords": [
            1905.9550224438049,
            953.1257054497613
          ]
        },
        "6553ee932b7ad7110d85bc62": {
          "type": "markup_text",
          "data": {
            "scale": 1,
            "rotate": 0,
            "content": [
              {
                "textAlign": "center",
                "children": [
                  {
                    "text": "Once its done we get the step and retrieve the message."
                  }
                ]
              }
            ],
            "overrideWidth": 378.24981689453125,
            "backgroundColor": {
              "r": 197,
              "g": 231,
              "b": 246,
              "a": 1
            },
            "name": "Block"
          },
          "nodeID": "6553ee932b7ad7110d85bc62",
          "coords": [
            2728.47089158443,
            318.3755681206598
          ]
        },
        "65529bf65324bea305b93191": {
          "type": "block",
          "data": {
            "name": "Run thread",
            "color": "#5b9fd7",
            "steps": [
              "65529bf65324bea305b93193"
            ]
          },
          "nodeID": "65529bf65324bea305b93191",
          "coords": [
            1247.5,
            40.07829687585945
          ]
        },
        "65529bf65324bea305b93193": {
          "type": "api",
          "data": {
            "name": "",
            "url": "https://api.openai.com/v1/threads/{{[threadID].threadID}}/runs",
            "body": [
              {
                "key": "",
                "val": ""
              }
            ],
            "params": [],
            "method": "POST",
            "headers": [
              {
                "key": "Content-Type",
                "val": "application/json"
              },
              {
                "key": "Authorization",
                "val": "Bearer {{[apiKey].apiKey}}"
              },
              {
                "key": "OpenAI-Beta",
                "val": "assistants=v1"
              }
            ],
            "content": "{\n    \"assistant_id\": \"{assistantID}\"\n  }",
            "mappings": [
              {
                "path": "response.id",
                "var": "runID"
              }
            ],
            "bodyType": "rawInput",
            "selectedAction": "Make a POST Request",
            "selectedIntegration": "Custom API",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "65529c6d5324bea305b9319e",
                  "id": "65529bf65324bea305b93194",
                  "data": {
                    "points": [
                      {
                        "point": [
                          1413.5,
                          207.33
                        ]
                      },
                      {
                        "point": [
                          1461.12,
                          207.33
                        ]
                      },
                      {
                        "point": [
                          1461.12,
                          69.58
                        ]
                      },
                      {
                        "point": [
                          1508.75,
                          69.58
                        ],
                        "allowedToTop": true
                      }
                    ]
                  }
                },
                "fail": {
                  "type": "fail",
                  "target": null,
                  "id": "65529bf65324bea305b93195"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "65529bf65324bea305b93193"
        }
      },
      "offsetX": 272,
      "offsetY": 104,
      "modified": 1699999587,
      "creatorID": 299371,
      "variables": [],
      "menuItems": [],
      "_id": "659755d05643e2ffb19c1382",
      "diagramID": "6552a040c84699fa1952cf58",
      "versionID": "659755d05643e2ffb19c1381"
    },
    "6552806214b35500124bdae9": {
      "name": "ROOT",
      "type": "TOPIC",
      "zoom": 100,
      "nodes": {
        "start00000000000000000000": {
          "nodeID": "start00000000000000000000",
          "type": "start",
          "coords": [
            -125.47306657576806,
            -726.6861503347151
          ],
          "data": {
            "name": "Start",
            "color": "#56b365",
            "steps": [],
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "65529a135324bea305b93148",
                  "id": "6032afcf359e8c14c06c0319",
                  "data": {
                    "points": [
                      {
                        "point": [
                          -60.82,
                          -704.69
                        ]
                      },
                      {
                        "point": [
                          -8.92,
                          -706.67
                        ]
                      }
                    ]
                  }
                }
              },
              "dynamic": []
            },
            "label": "Start"
          }
        },
        "65529a135324bea305b93146": {
          "type": "setV2",
          "data": {
            "name": "",
            "sets": [
              {
                "type": "advance",
                "variable": "apiKey",
                "expression": "''"
              }
            ],
            "title": "API Key",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": null,
                  "id": "65529a135324bea305b93147"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "65529a135324bea305b93146"
        },
        "65529a135324bea305b93148": {
          "type": "block",
          "data": {
            "name": "Set Variables",
            "steps": [
              "65529a135324bea305b93146",
              "65529a3e5324bea305b9314f",
              "659b3ac0e3980221fbab661b",
              "659b3ac4e3980221fbab6620"
            ],
            "color": "#bf87ce"
          },
          "nodeID": "65529a135324bea305b93148",
          "coords": [
            156.07794618413277,
            -733.674451396533
          ]
        },
        "65529a3e5324bea305b9314f": {
          "type": "setV2",
          "data": {
            "name": "",
            "sets": [
              {
                "type": "advance",
                "variable": "assistantID",
                "expression": "''"
              }
            ],
            "title": "AssistantID",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": null,
                  "id": "65529a3e5324bea305b93150",
                  "data": {
                    "points": [
                      {
                        "point": [
                          322.08,
                          -593.92
                        ]
                      },
                      {
                        "point": [
                          384.11,
                          -593.92
                        ]
                      },
                      {
                        "point": [
                          384.11,
                          -704.29
                        ]
                      },
                      {
                        "point": [
                          446.13,
                          -704.29
                        ],
                        "allowedToTop": true
                      }
                    ]
                  }
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "65529a3e5324bea305b9314f"
        },
        "65529a6c5324bea305b93154": {
          "type": "api",
          "data": {
            "name": "",
            "url": "https://api.openai.com/v1/threads",
            "body": [],
            "params": [],
            "method": "POST",
            "headers": [
              {
                "key": "Content-Type",
                "val": "application/json"
              },
              {
                "key": "Authorization",
                "val": "Bearer {{[apiKey].apiKey}}"
              },
              {
                "key": "OpenAI-Beta",
                "val": "assistants=v1"
              }
            ],
            "content": "",
            "mappings": [
              {
                "path": "response.id",
                "var": "threadID"
              }
            ],
            "bodyType": "formData",
            "selectedAction": "Make a POST Request",
            "selectedIntegration": "Custom API",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "65529b0f5324bea305b93162",
                  "id": "65529a6c5324bea305b93155",
                  "data": {
                    "points": [
                      {
                        "point": [
                          777.13,
                          -582.04
                        ]
                      },
                      {
                        "point": [
                          825.2,
                          -582.04
                        ]
                      },
                      {
                        "point": [
                          825.2,
                          -735.78
                        ]
                      },
                      {
                        "point": [
                          873.27,
                          -735.78
                        ],
                        "allowedToTop": true
                      }
                    ]
                  }
                },
                "fail": {
                  "type": "fail",
                  "target": null,
                  "id": "65529a6c5324bea305b93156"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "65529a6c5324bea305b93154"
        },
        "65529a6c5324bea305b93157": {
          "type": "block",
          "data": {
            "name": "Create Thread",
            "steps": [
              "65529a6c5324bea305b93154"
            ],
            "color": "#5b9fd7"
          },
          "nodeID": "65529a6c5324bea305b93157",
          "coords": [
            611.1348444618372,
            -731.2919545469114
          ]
        },
        "65529b0f5324bea305b9315f": {
          "type": "captureV2",
          "data": {
            "name": "Capture",
            "intentScope": "GLOBAL",
            "capture": {
              "type": "query",
              "variable": "last_utterance"
            },
            "noReply": null,
            "noMatch": null,
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "655bde666692b1475024a14b",
                  "id": "65529b0f5324bea305b93160",
                  "data": {
                    "points": [
                      {
                        "point": [
                          1196.43,
                          -444.52
                        ]
                      },
                      {
                        "point": [
                          1242.5,
                          -444.52
                        ]
                      },
                      {
                        "point": [
                          1242.5,
                          -726.16
                        ]
                      },
                      {
                        "point": [
                          1288.58,
                          -726.16
                        ],
                        "allowedToTop": true
                      }
                    ]
                  }
                },
                "else": {
                  "type": "else",
                  "target": null,
                  "id": "65529b0f5324bea305b93161"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "65529b0f5324bea305b9315f",
          "coords": [
            0,
            0
          ]
        },
        "65529b0f5324bea305b93162": {
          "type": "block",
          "data": {
            "name": "Greeting",
            "steps": [
              "65529b185324bea305b93169"
            ],
            "color": ""
          },
          "nodeID": "65529b0f5324bea305b93162",
          "coords": [
            1038.2682494953901,
            -762.7769608476683
          ]
        },
        "65529b185324bea305b93169": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "iq2ns38n8",
                "content": [
                  {
                    "children": [
                      {
                        "text": "¿Bienvenido en que puedo ayudarlo? ¿Quiere conocer el clima de un sitio o la ubicación?, simplemente ingrese la ciudad y lo que desea saber."
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "655bde816692b1475024a1ce",
                  "id": "65529b185324bea305b9316a",
                  "data": {
                    "points": [
                      {
                        "point": [
                          872.27,
                          -644.78
                        ],
                        "reversed": true
                      },
                      {
                        "point": [
                          848.27,
                          -644.78
                        ]
                      },
                      {
                        "point": [
                          848.27,
                          -556.52
                        ]
                      },
                      {
                        "point": [
                          1030.43,
                          -556.52
                        ]
                      },
                      {
                        "point": [
                          1030.43,
                          -532.52
                        ],
                        "toTop": true,
                        "allowedToTop": true
                      }
                    ]
                  }
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "65529b185324bea305b93169",
          "coords": [
            0,
            0
          ]
        },
        "6552a0305324bea305b93215": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "jt49a38at",
                "content": [
                  {
                    "children": [
                      {
                        "text": ""
                      },
                      {
                        "id": "assistantReply",
                        "name": "assistantReply",
                        "isSlot": false,
                        "type": "variable",
                        "children": [
                          {
                            "text": ""
                          }
                        ]
                      },
                      {
                        "text": " "
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "655bde986692b1475024a1d9",
                  "id": "6552a0305324bea305b93216",
                  "data": {}
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "6552a0305324bea305b93215",
          "coords": [
            0,
            0
          ]
        },
        "6552a0305324bea305b93217": {
          "type": "block",
          "data": {
            "name": "Give Response",
            "steps": [
              "6552a0305324bea305b93215"
            ],
            "color": ""
          },
          "nodeID": "6552a0305324bea305b93217",
          "coords": [
            3943.316675553162,
            -757.1011919933042
          ]
        },
        "6553ec502b7ad7110d85bc09": {
          "type": "markup_text",
          "data": {
            "scale": 1,
            "rotate": 0,
            "content": [
              {
                "textAlign": "center",
                "children": [
                  {
                    "text": "Creates a new thread for the conversation. This threadID will remain until a user restarts the conversation."
                  }
                ]
              }
            ],
            "overrideWidth": 303.59483577270976,
            "backgroundColor": {
              "r": 197,
              "g": 231,
              "b": 246,
              "a": 1
            },
            "name": "Block"
          },
          "nodeID": "6553ec502b7ad7110d85bc09",
          "coords": [
            458.30141076807143,
            -886.8834163198455
          ]
        },
        "655bde666692b1475024a13f": {
          "type": "block",
          "data": {
            "name": "Check loop",
            "color": "#bf87ce",
            "steps": [
              "655bde666692b1475024a158"
            ]
          },
          "nodeID": "655bde666692b1475024a13f",
          "coords": [
            2691.902400488481,
            -250.2440960065948
          ]
        },
        "655bde666692b1475024a141": {
          "type": "block",
          "data": {
            "name": "Retrieve Thread",
            "color": "#5b9fd7",
            "steps": [
              "655bde666692b1475024a15c"
            ]
          },
          "nodeID": "655bde666692b1475024a141",
          "coords": [
            2264.8262672154497,
            -716.9146635085839
          ]
        },
        "655bde666692b1475024a143": {
          "type": "block",
          "data": {
            "name": "Poll to see if run complete",
            "color": "#bf87ce",
            "steps": [
              "655bde666692b1475024a160"
            ]
          },
          "nodeID": "655bde666692b1475024a143",
          "coords": [
            2686.0762672154497,
            -760.9771635085839
          ]
        },
        "655bde666692b1475024a145": {
          "type": "block",
          "data": {
            "name": "Get Message ID",
            "color": "#5b9fd7",
            "steps": [
              "655bde666692b1475024a166"
            ]
          },
          "nodeID": "655bde666692b1475024a145",
          "coords": [
            3122.7111046947725,
            -763.3230837054467
          ]
        },
        "655bde666692b1475024a147": {
          "type": "block",
          "data": {
            "name": "Get Message ID copy",
            "color": "#5b9fd7",
            "steps": [
              "655bde666692b1475024a16a"
            ]
          },
          "nodeID": "655bde666692b1475024a147",
          "coords": [
            3508.961129676587,
            -768.0732335167676
          ]
        },
        "655bde666692b1475024a149": {
          "type": "block",
          "data": {
            "name": "Run thread",
            "color": "#5b9fd7",
            "steps": [
              "655bde666692b1475024a16e"
            ]
          },
          "nodeID": "655bde666692b1475024a149",
          "coords": [
            1846.0762672154501,
            -756.9146635085839
          ]
        },
        "655bde666692b1475024a14b": {
          "type": "block",
          "data": {
            "name": "Add message to thread",
            "color": "#5b9fd7",
            "steps": [
              "655bde666692b1475024a172"
            ]
          },
          "nodeID": "655bde666692b1475024a14b",
          "coords": [
            1453.5762672154501,
            -753.1646635085839
          ]
        },
        "655bde666692b1475024a158": {
          "type": "ifV2",
          "data": {
            "name": "If",
            "expressions": [
              {
                "type": null,
                "name": "First Loop",
                "value": [
                  {
                    "logicInterface": "variable",
                    "type": "equals",
                    "value": [
                      {
                        "type": "variable",
                        "value": "counter"
                      },
                      {
                        "type": "value",
                        "value": "0"
                      }
                    ]
                  }
                ]
              },
              {
                "type": null,
                "name": "Every 25 loops",
                "value": [
                  {
                    "id": "je1ps38mg",
                    "logicInterface": "expression",
                    "type": "advance",
                    "value": "{{[counter].counter}} % 25 = 0"
                  }
                ]
              }
            ],
            "noMatch": {
              "type": "path",
              "pathName": "Later Loops"
            },
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "else": {
                  "type": "else",
                  "target": "655bde666692b1475024a15c",
                  "id": "655bde666692b1475024a159",
                  "data": {
                    "points": [
                      {
                        "point": [
                          2525.9,
                          -61.99
                        ],
                        "reversed": true
                      },
                      {
                        "point": [
                          2500.31,
                          -61.99
                        ],
                        "locked": true
                      },
                      {
                        "point": [
                          2500.31,
                          -637.91
                        ],
                        "locked": true
                      },
                      {
                        "point": [
                          2430.83,
                          -637.91
                        ],
                        "reversed": true
                      }
                    ]
                  }
                }
              },
              "dynamic": [
                {
                  "type": "",
                  "target": "6560d3f14802437b6c8ad98a",
                  "id": "655bde666692b1475024a15a",
                  "data": {
                    "points": [
                      {
                        "point": [
                          2857.9,
                          -170.99
                        ]
                      },
                      {
                        "point": [
                          2881.9,
                          -170.99
                        ]
                      },
                      {
                        "point": [
                          2881.9,
                          -7.62
                        ]
                      },
                      {
                        "point": [
                          2699.19,
                          -7.62
                        ]
                      },
                      {
                        "point": [
                          2699.19,
                          16.38
                        ],
                        "toTop": true,
                        "allowedToTop": true
                      }
                    ]
                  }
                },
                {
                  "id": "6560d3fa4802437b6c8ad98f",
                  "type": "",
                  "target": "6560d3f14802437b6c8ad987",
                  "data": {
                    "points": [
                      {
                        "point": [
                          2857.9,
                          -116.49
                        ]
                      },
                      {
                        "point": [
                          2926.23,
                          -116.49
                        ],
                        "locked": true
                      },
                      {
                        "point": [
                          2926.23,
                          155.38
                        ],
                        "locked": true
                      },
                      {
                        "point": [
                          2865.19,
                          155.38
                        ],
                        "reversed": true
                      }
                    ]
                  }
                }
              ]
            }
          },
          "nodeID": "655bde666692b1475024a158"
        },
        "655bde666692b1475024a15c": {
          "type": "api",
          "data": {
            "name": "",
            "url": "https://api.openai.com/v1/threads/{{[threadID].threadID}}/runs/{{[runID].runID}}",
            "body": [
              {
                "key": "",
                "val": ""
              }
            ],
            "params": [],
            "method": "GET",
            "headers": [
              {
                "key": "Authorization",
                "val": "Bearer {{[apiKey].apiKey}}"
              },
              {
                "key": "OpenAI-Beta",
                "val": "assistants=v1"
              }
            ],
            "content": "",
            "mappings": [
              {
                "path": "response.status",
                "var": "runStatus"
              },
              {
                "path": "response.required_action.submit_tool_outputs.tool_calls[0].function.name",
                "var": "functionName"
              },
              {
                "path": "response.required_action.submit_tool_outputs.tool_calls[0].function.arguments",
                "var": "functionParamsText"
              },
              {
                "path": "response.required_action.submit_tool_outputs.tool_calls[0].id",
                "var": "tool_call_id"
              }
            ],
            "bodyType": "rawInput",
            "selectedAction": "Make a GET Request",
            "selectedIntegration": "Custom API",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "655bde666692b1475024a160",
                  "id": "655bde666692b1475024a15e",
                  "data": {}
                },
                "fail": {
                  "type": "fail",
                  "target": null,
                  "id": "655bde666692b1475024a15d"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "655bde666692b1475024a15c"
        },
        "655bde666692b1475024a160": {
          "type": "ifV2",
          "data": {
            "name": "If",
            "expressions": [
              {
                "type": null,
                "name": "Completed",
                "value": [
                  {
                    "logicInterface": "variable",
                    "type": "equals",
                    "value": [
                      {
                        "type": "variable",
                        "value": "runStatus"
                      },
                      {
                        "type": "value",
                        "value": "completed"
                      }
                    ]
                  }
                ]
              },
              {
                "type": null,
                "name": "In Progress",
                "value": [
                  {
                    "logicInterface": "variable",
                    "type": "equals",
                    "value": [
                      {
                        "type": "variable",
                        "value": "runStatus"
                      },
                      {
                        "type": "value",
                        "value": "in_progress"
                      }
                    ]
                  }
                ]
              },
              {
                "type": null,
                "name": "Queued",
                "value": [
                  {
                    "logicInterface": "variable",
                    "type": "equals",
                    "value": [
                      {
                        "type": "variable",
                        "value": "runStatus"
                      },
                      {
                        "type": "value",
                        "value": "queued"
                      }
                    ]
                  }
                ]
              },
              {
                "type": null,
                "name": "function call",
                "value": [
                  {
                    "logicInterface": "variable",
                    "type": "equals",
                    "value": [
                      {
                        "type": "variable",
                        "value": "runStatus"
                      },
                      {
                        "type": "value",
                        "value": "requires_action"
                      }
                    ]
                  }
                ]
              }
            ],
            "noMatch": {
              "type": "path",
              "pathName": "Other"
            },
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "else": {
                  "type": "else",
                  "target": "655bde666692b1475024a13f",
                  "id": "655bde666692b1475024a161",
                  "data": {
                    "points": [
                      {
                        "point": [
                          2852.08,
                          -463.73
                        ]
                      },
                      {
                        "point": [
                          2927.5,
                          -463.73
                        ],
                        "locked": true
                      },
                      {
                        "point": [
                          2927.5,
                          -356.99
                        ],
                        "locked": true
                      },
                      {
                        "point": [
                          2691.9,
                          -356.99
                        ]
                      },
                      {
                        "point": [
                          2691.9,
                          -250.24
                        ],
                        "toTop": true,
                        "allowedToTop": true
                      }
                    ]
                  }
                }
              },
              "dynamic": [
                {
                  "type": "",
                  "target": "655bde666692b1475024a145",
                  "id": "655bde666692b1475024a162",
                  "data": {
                    "points": [
                      {
                        "point": [
                          2852.08,
                          -681.73
                        ]
                      },
                      {
                        "point": [
                          2904.89,
                          -681.73
                        ]
                      },
                      {
                        "point": [
                          2904.89,
                          -736.32
                        ]
                      },
                      {
                        "point": [
                          2957.71,
                          -736.32
                        ],
                        "allowedToTop": true
                      }
                    ],
                    "event": {
                      "type": "Completed"
                    }
                  }
                },
                {
                  "type": "",
                  "target": "655bde666692b1475024a13f",
                  "id": "655bde666692b1475024a163",
                  "data": {
                    "points": [
                      {
                        "point": [
                          2852.08,
                          -627.23
                        ]
                      },
                      {
                        "point": [
                          2876.08,
                          -627.23
                        ]
                      },
                      {
                        "point": [
                          2876.08,
                          -400.48
                        ]
                      },
                      {
                        "point": [
                          2691.9,
                          -400.48
                        ]
                      },
                      {
                        "point": [
                          2691.9,
                          -250.24
                        ],
                        "toTop": true,
                        "allowedToTop": true
                      }
                    ],
                    "event": {
                      "type": "In Progress"
                    }
                  }
                },
                {
                  "type": "",
                  "target": "655bde666692b1475024a13f",
                  "id": "655bde666692b1475024a164",
                  "data": {
                    "points": [
                      {
                        "point": [
                          2852.08,
                          -572.73
                        ]
                      },
                      {
                        "point": [
                          2909.75,
                          -572.73
                        ],
                        "locked": true
                      },
                      {
                        "point": [
                          2909.75,
                          -400.48
                        ],
                        "locked": true
                      },
                      {
                        "point": [
                          2691.9,
                          -400.48
                        ]
                      },
                      {
                        "point": [
                          2691.9,
                          -250.24
                        ],
                        "toTop": true,
                        "allowedToTop": true
                      }
                    ],
                    "event": {
                      "type": "Queued"
                    }
                  }
                },
                {
                  "id": "659756015ade7b5bb0653f1a",
                  "type": "",
                  "target": "659757785ade7b5bb0653f25",
                  "data": {}
                }
              ]
            }
          },
          "nodeID": "655bde666692b1475024a160"
        },
        "655bde666692b1475024a166": {
          "type": "api",
          "data": {
            "name": "",
            "url": "https://api.openai.com/v1/threads/{{[threadID].threadID}}/runs/{{[runID].runID}}/steps",
            "body": [],
            "params": [],
            "method": "GET",
            "headers": [
              {
                "key": "Content-Type",
                "val": "application/json"
              },
              {
                "key": "Authorization",
                "val": "Bearer {{[apiKey].apiKey}}"
              },
              {
                "key": "OpenAI-Beta",
                "val": "assistants=v1"
              }
            ],
            "content": "",
            "mappings": [
              {
                "path": "response.data[0].step_details.message_creation.message_id",
                "var": "messageID"
              }
            ],
            "bodyType": "formData",
            "selectedAction": "Make a GET Request",
            "selectedIntegration": "Custom API",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "655bde666692b1475024a147",
                  "id": "655bde666692b1475024a168",
                  "data": {
                    "points": [
                      {
                        "point": [
                          3288.71,
                          -596.07
                        ]
                      },
                      {
                        "point": [
                          3316.34,
                          -596.07
                        ]
                      },
                      {
                        "point": [
                          3316.34,
                          -741.07
                        ]
                      },
                      {
                        "point": [
                          3343.96,
                          -741.07
                        ],
                        "allowedToTop": true
                      }
                    ]
                  }
                },
                "fail": {
                  "type": "fail",
                  "target": null,
                  "id": "655bde666692b1475024a167"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "655bde666692b1475024a166"
        },
        "655bde666692b1475024a16a": {
          "type": "api",
          "data": {
            "name": "",
            "url": "https://api.openai.com/v1/threads/{{[threadID].threadID}}/messages/{{[messageID].messageID}}",
            "body": [],
            "params": [],
            "method": "GET",
            "headers": [
              {
                "key": "Content-Type",
                "val": "application/json"
              },
              {
                "key": "Authorization",
                "val": "Bearer {{[apiKey].apiKey}}"
              },
              {
                "key": "OpenAI-Beta",
                "val": "assistants=v1"
              }
            ],
            "content": "",
            "mappings": [
              {
                "path": "response.content[0].text.value",
                "var": "assistantReply"
              }
            ],
            "bodyType": "formData",
            "selectedAction": "Make a GET Request",
            "selectedIntegration": "Custom API",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "6552a0305324bea305b93217",
                  "id": "655bde666692b1475024a16c",
                  "data": {
                    "points": [
                      {
                        "point": [
                          3674.96,
                          -600.82
                        ]
                      },
                      {
                        "point": [
                          3726.64,
                          -600.82
                        ]
                      },
                      {
                        "point": [
                          3726.64,
                          -730.1
                        ]
                      },
                      {
                        "point": [
                          3778.32,
                          -730.1
                        ],
                        "allowedToTop": true
                      }
                    ]
                  }
                },
                "fail": {
                  "type": "fail",
                  "target": null,
                  "id": "655bde666692b1475024a16b"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "655bde666692b1475024a16a"
        },
        "655bde666692b1475024a16e": {
          "type": "api",
          "data": {
            "name": "",
            "url": "https://api.openai.com/v1/threads/{{[threadID].threadID}}/runs",
            "body": [
              {
                "key": "",
                "val": ""
              }
            ],
            "params": [],
            "method": "POST",
            "headers": [
              {
                "key": "Content-Type",
                "val": "application/json"
              },
              {
                "key": "Authorization",
                "val": "Bearer {{[apiKey].apiKey}}"
              },
              {
                "key": "OpenAI-Beta",
                "val": "assistants=v1"
              }
            ],
            "content": "{\n    \"assistant_id\": \"{assistantID}\"\n  }",
            "mappings": [
              {
                "path": "response.id",
                "var": "runID"
              }
            ],
            "bodyType": "rawInput",
            "selectedAction": "Make a POST Request",
            "selectedIntegration": "Custom API",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "655bde666692b1475024a141",
                  "id": "655bde666692b1475024a170",
                  "data": {
                    "points": [
                      {
                        "point": [
                          2012.08,
                          -589.66
                        ]
                      },
                      {
                        "point": [
                          2053.45,
                          -589.66
                        ]
                      },
                      {
                        "point": [
                          2053.45,
                          -687.41
                        ]
                      },
                      {
                        "point": [
                          2094.83,
                          -687.41
                        ],
                        "allowedToTop": true
                      }
                    ]
                  }
                },
                "fail": {
                  "type": "fail",
                  "target": null,
                  "id": "655bde666692b1475024a16f"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "655bde666692b1475024a16e"
        },
        "655bde666692b1475024a172": {
          "type": "api",
          "data": {
            "name": "",
            "url": "https://api.openai.com/v1/threads/{{[threadID].threadID}}/messages",
            "body": [
              {
                "key": "",
                "val": ""
              }
            ],
            "params": [],
            "method": "POST",
            "headers": [
              {
                "key": "Content-Type",
                "val": "application/json"
              },
              {
                "key": "Authorization",
                "val": "Bearer {{[apiKey].apiKey}}"
              },
              {
                "key": "OpenAI-Beta",
                "val": "assistants=v1"
              }
            ],
            "content": "{\n      \"role\": \"user\",\n      \"content\": \"{last_utterance}\"\n    }",
            "mappings": [],
            "bodyType": "rawInput",
            "selectedAction": "Make a POST Request",
            "selectedIntegration": "Custom API",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "655bde666692b1475024a149",
                  "id": "655bde666692b1475024a174",
                  "data": {
                    "points": [
                      {
                        "point": [
                          1619.58,
                          -585.91
                        ]
                      },
                      {
                        "point": [
                          1650.33,
                          -585.91
                        ]
                      },
                      {
                        "point": [
                          1650.33,
                          -729.91
                        ]
                      },
                      {
                        "point": [
                          1681.08,
                          -729.91
                        ],
                        "allowedToTop": true
                      }
                    ]
                  }
                },
                "fail": {
                  "type": "fail",
                  "target": null,
                  "id": "655bde666692b1475024a173"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "655bde666692b1475024a172"
        },
        "655bde666692b1475024a177": {
          "type": "markup_text",
          "data": {
            "name": "Block",
            "scale": 1,
            "rotate": 0,
            "content": [
              {
                "textAlign": "center",
                "children": [
                  {
                    "text": "Add user message to the thread"
                  }
                ]
              }
            ],
            "overrideWidth": 326,
            "backgroundColor": {
              "r": 197,
              "g": 231,
              "b": 246,
              "a": 1
            }
          },
          "nodeID": "655bde666692b1475024a177",
          "coords": [
            1286.3779029576376,
            -838.0391029625683
          ]
        },
        "655bde666692b1475024a178": {
          "type": "markup_text",
          "data": {
            "name": "Block",
            "scale": 1,
            "rotate": 0,
            "content": [
              {
                "textAlign": "center",
                "children": [
                  {
                    "text": "Run the thread"
                  }
                ]
              }
            ],
            "overrideWidth": 168,
            "backgroundColor": {
              "r": 197,
              "g": 231,
              "b": 246,
              "a": 1
            }
          },
          "nodeID": "655bde666692b1475024a178",
          "coords": [
            1750.1279029576376,
            -840.5391029625683
          ]
        },
        "655bde666692b1475024a179": {
          "type": "markup_text",
          "data": {
            "name": "Block",
            "scale": 1,
            "rotate": 0,
            "content": [
              {
                "textAlign": "center",
                "children": [
                  {
                    "text": "This checks to see if we have a response from GPT yet. Sometimes this takes up to 10 seconds."
                  }
                ]
              }
            ],
            "overrideWidth": 366.7500305175781,
            "backgroundColor": {
              "r": 197,
              "g": 231,
              "b": 246,
              "a": 1
            }
          },
          "nodeID": "655bde666692b1475024a179",
          "coords": [
            2284.3777808873247,
            -902.6216583979316
          ]
        },
        "655bde816692b1475024a1ce": {
          "type": "block",
          "data": {
            "name": "Capture Response",
            "steps": [
              "65529b0f5324bea305b9315f"
            ],
            "color": ""
          },
          "nodeID": "655bde816692b1475024a1ce",
          "coords": [
            1030.4317143765234,
            -532.5228176377939
          ]
        },
        "655bde986692b1475024a1d8": {
          "type": "goToNode",
          "data": {
            "name": "",
            "nodeID": "65529b0f5324bea305b93162",
            "diagramID": "6552806214b35500124bdae9",
            "portsV2": {
              "byKey": {},
              "builtIn": {},
              "dynamic": []
            }
          },
          "nodeID": "655bde986692b1475024a1d8"
        },
        "655bde986692b1475024a1d9": {
          "type": "actions",
          "data": {
            "name": "",
            "steps": [
              "655bde986692b1475024a1d8"
            ]
          },
          "nodeID": "655bde986692b1475024a1d9",
          "coords": [
            0,
            0
          ]
        },
        "6560d3f14802437b6c8ad987": {
          "type": "buttons",
          "data": {
            "name": "Buttons",
            "buttons": [
              {
                "id": "xu1l338ks",
                "name": "",
                "actions": []
              }
            ],
            "noReply": {
              "types": [
                "reprompt",
                "path"
              ],
              "pathName": "No reply",
              "randomize": false,
              "reprompts": [
                {
                  "id": "clpcuxt9n01mz3b78b59t0pp0",
                  "content": [
                    {
                      "children": [
                        {
                          "text": ""
                        }
                      ]
                    }
                  ]
                }
              ],
              "timeout": 1
            },
            "intentScope": "GLOBAL",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "else": {
                  "type": "else",
                  "target": null,
                  "id": "6560d3f14802437b6c8ad989"
                },
                "no-reply": {
                  "id": "6560d4174802437b6c8ad991",
                  "type": "no-reply",
                  "target": "655bde666692b1475024a15c",
                  "data": {
                    "points": [
                      {
                        "point": [
                          2533.19,
                          209.88
                        ],
                        "reversed": true
                      },
                      {
                        "point": [
                          2069.33,
                          209.88
                        ],
                        "locked": true
                      },
                      {
                        "point": [
                          2069.33,
                          -637.91
                        ],
                        "locked": true
                      },
                      {
                        "point": [
                          2098.83,
                          -637.91
                        ]
                      }
                    ]
                  }
                }
              },
              "dynamic": [
                {
                  "type": "",
                  "target": null,
                  "id": "6560d3f14802437b6c8ad988"
                }
              ]
            }
          },
          "nodeID": "6560d3f14802437b6c8ad987"
        },
        "6560d3f14802437b6c8ad98a": {
          "type": "block",
          "data": {
            "name": "1s pause ",
            "steps": [
              "6560d4424802437b6c8ad996",
              "6560d3f14802437b6c8ad987"
            ],
            "color": ""
          },
          "nodeID": "6560d3f14802437b6c8ad98a",
          "coords": [
            2699.186399021368,
            16.37951154711361
          ]
        },
        "6560d4424802437b6c8ad996": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "r61rb3852",
                "content": [
                  {
                    "children": [
                      {
                        "text": "buscando..."
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": null,
                  "id": "6560d4424802437b6c8ad997"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "6560d4424802437b6c8ad996"
        },
        "659757555ade7b5bb0653f1e": {
          "type": "block",
          "data": {
            "name": "determinar función",
            "steps": [
              "659757785ade7b5bb0653f25"
            ],
            "color": ""
          },
          "nodeID": "659757555ade7b5bb0653f1e",
          "coords": [
            4578.209750115497,
            282.5716786141465
          ]
        },
        "659757785ade7b5bb0653f25": {
          "type": "code",
          "data": {
            "name": "",
            "code": "functionParams = JSON.parse(functionParamsText);\n\nif (functionName == \"get_geocode\") {\n  search_text = functionParams.search_text;\n  return \"mapbox\"\n} else if (functionName == \"get_weather\") {\n  lat = functionParams.lat;\n  lon = functionParams.lon;\n  return \"openweather\"\n}\n",
            "paths": [
              {
                "label": "mapbox",
                "key": "1x3rw3qep"
              },
              {
                "label": "openweather",
                "key": "ve3s83qn2"
              }
            ],
            "portsV2": {
              "byKey": {
                "1x3rw3qep": {
                  "id": "65976df89088d3104470fbe8",
                  "target": "65975e095ade7b5bb0653f4b",
                  "type": "",
                  "data": {
                    "points": [
                      {
                        "point": [
                          4744.21,
                          470.82
                        ]
                      },
                      {
                        "point": [
                          4774.18,
                          470.82
                        ]
                      },
                      {
                        "point": [
                          4774.18,
                          250.21
                        ]
                      },
                      {
                        "point": [
                          4804.14,
                          250.21
                        ],
                        "allowedToTop": false
                      }
                    ]
                  }
                },
                "ve3s83qn2": {
                  "id": "65976dfd9088d3104470fbea",
                  "target": "65975dee5ade7b5bb0653f41",
                  "type": "",
                  "data": {
                    "points": [
                      {
                        "point": [
                          4744.21,
                          525.32
                        ]
                      },
                      {
                        "point": [
                          4768.21,
                          525.32
                        ]
                      },
                      {
                        "point": [
                          4768.21,
                          541.06
                        ]
                      },
                      {
                        "point": [
                          4754.23,
                          541.06
                        ]
                      },
                      {
                        "point": [
                          4754.23,
                          556.8
                        ]
                      },
                      {
                        "point": [
                          4778.23,
                          556.8
                        ],
                        "allowedToTop": false
                      }
                    ]
                  }
                }
              },
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": null,
                  "id": "659757785ade7b5bb0653f26"
                },
                "fail": {
                  "type": "fail",
                  "target": null,
                  "id": "659757785ade7b5bb0653f27"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "659757785ade7b5bb0653f25",
          "coords": [
            0,
            0
          ]
        },
        "65975dee5ade7b5bb0653f41": {
          "type": "api",
          "data": {
            "name": "",
            "url": "https://api.openweathermap.org/data/2.5/weather?lat={{[lat].lat}}&lon={{[lon].lon}}&appid={{[apiOpenWeather].apiOpenWeather}}&units=metric",
            "body": [],
            "params": [],
            "method": "GET",
            "headers": [
              {
                "key": "Content-Type",
                "val": "application/json"
              }
            ],
            "content": "",
            "mappings": [
              {
                "path": "response",
                "var": "responseAPI"
              }
            ],
            "bodyType": "formData",
            "selectedAction": "Make a GET Request",
            "selectedIntegration": "Custom API",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "659765469088d3104470fb52",
                  "id": "65975dee5ade7b5bb0653f42",
                  "data": {
                    "points": [
                      {
                        "point": [
                          5110.23,
                          645.05
                        ]
                      },
                      {
                        "point": [
                          5203.51,
                          645.05
                        ]
                      },
                      {
                        "point": [
                          5203.51,
                          205.32
                        ]
                      },
                      {
                        "point": [
                          5296.79,
                          205.32
                        ],
                        "allowedToTop": false
                      }
                    ]
                  }
                },
                "fail": {
                  "type": "fail",
                  "target": null,
                  "id": "65975dee5ade7b5bb0653f43"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "65975dee5ade7b5bb0653f41"
        },
        "65975dee5ade7b5bb0653f44": {
          "type": "block",
          "data": {
            "name": "openweather API",
            "steps": [
              "65975dee5ade7b5bb0653f41"
            ],
            "color": ""
          },
          "nodeID": "65975dee5ade7b5bb0653f44",
          "coords": [
            4944.232477605756,
            477.79895138397984
          ]
        },
        "65975e095ade7b5bb0653f4b": {
          "type": "api",
          "data": {
            "name": "",
            "url": "https://api.mapbox.com/geocoding/v5/mapbox.places/{{[search_text].search_text}}.json?access_token={{[apiMapBox].apiMapBox}}",
            "body": [],
            "params": [],
            "method": "GET",
            "headers": [
              {
                "key": "Content-Type",
                "val": "application/json"
              }
            ],
            "content": "",
            "mappings": [
              {
                "path": "response",
                "var": "responseAPI"
              }
            ],
            "bodyType": "formData",
            "selectedAction": "Make a GET Request",
            "selectedIntegration": "Custom API",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "659765469088d3104470fb52",
                  "id": "65975e095ade7b5bb0653f4c",
                  "data": {
                    "points": [
                      {
                        "point": [
                          5136.14,
                          338.4599999999999
                        ]
                      },
                      {
                        "point": [
                          5272.44,
                          338.4599999999999
                        ],
                        "locked": true
                      },
                      {
                        "point": [
                          5272.44,
                          205.321717497261
                        ],
                        "locked": true
                      },
                      {
                        "point": [
                          5296.793698826056,
                          205.321717497261
                        ]
                      }
                    ]
                  }
                },
                "fail": {
                  "type": "fail",
                  "target": null,
                  "id": "65975e095ade7b5bb0653f4d"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "65975e095ade7b5bb0653f4b"
        },
        "65975e095ade7b5bb0653f4e": {
          "type": "block",
          "data": {
            "name": "mapbox API",
            "steps": [
              "65975e095ade7b5bb0653f4b"
            ],
            "color": ""
          },
          "nodeID": "65975e095ade7b5bb0653f4e",
          "coords": [
            4970.141568424997,
            171.20804225523904
          ]
        },
        "659765469088d3104470fb52": {
          "type": "code",
          "data": {
            "name": "",
            "code": "responseAPI = JSON.stringify(responseAPI)\r\n\r\nbody = {\r\n    tool_outputs: [\r\n\t\t{\r\n\t\t\ttool_call_id: tool_call_id,\r\n\t\t\toutput: responseAPI\r\n\t\t}\r\n\t]\r\n  }\r\n\r\nbody = JSON.stringify(body)",
            "paths": [],
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": null,
                  "id": "659765469088d3104470fb54",
                  "data": {}
                },
                "fail": {
                  "type": "fail",
                  "target": null,
                  "id": "659765469088d3104470fb53"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "659765469088d3104470fb52"
        },
        "659765929088d3104470fb62": {
          "type": "block",
          "data": {
            "name": "devolver respuesta al asistente",
            "color": "",
            "steps": [
              "659765469088d3104470fb52",
              "659765c39088d3104470fb74"
            ]
          },
          "nodeID": "659765929088d3104470fb62",
          "coords": [
            5462.793325508965,
            126.32187220255486
          ]
        },
        "659765c39088d3104470fb74": {
          "type": "api",
          "data": {
            "name": "",
            "url": "https://api.openai.com/v1/threads/{{[threadID].threadID}}/runs/{{[runID].runID}}/submit_tool_outputs",
            "body": [
              {
                "key": "",
                "val": ""
              }
            ],
            "params": [],
            "method": "POST",
            "headers": [
              {
                "key": "Content-Type",
                "val": "application/json"
              },
              {
                "key": "Authorization",
                "val": "Bearer {{[apiKey].apiKey}}"
              },
              {
                "key": "OpenAI-Beta",
                "val": "assistants=v1"
              }
            ],
            "content": "{body}",
            "mappings": [
              {
                "path": "response",
                "var": "responseToolOutput"
              }
            ],
            "bodyType": "rawInput",
            "selectedAction": "Make a POST Request",
            "selectedIntegration": "Custom API",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "",
                  "target": "659768ab9088d3104470fbd1",
                  "id": "659765c39088d3104470fb76",
                  "data": {}
                },
                "fail": {
                  "type": "",
                  "target": null,
                  "id": "659765c39088d3104470fb75"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "659765c39088d3104470fb74",
          "coords": [
            0,
            0
          ]
        },
        "659768ab9088d3104470fbd0": {
          "type": "goToNode",
          "data": {
            "name": "",
            "nodeID": "655bde666692b1475024a141",
            "diagramID": "6552806214b35500124bdae9",
            "portsV2": {
              "byKey": {},
              "builtIn": {},
              "dynamic": []
            }
          },
          "nodeID": "659768ab9088d3104470fbd0"
        },
        "659768ab9088d3104470fbd1": {
          "type": "actions",
          "data": {
            "name": "",
            "steps": [
              "659768ab9088d3104470fbd0"
            ]
          },
          "nodeID": "659768ab9088d3104470fbd1",
          "coords": [
            0,
            0
          ]
        },
        "659b3ac0e3980221fbab661b": {
          "type": "setV2",
          "data": {
            "name": "",
            "sets": [
              {
                "type": "advance",
                "variable": "apiMapBox",
                "expression": "''"
              }
            ],
            "title": "API MAPBOX",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": null,
                  "id": "659b3ac0e3980221fbab661c"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "659b3ac0e3980221fbab661b"
        },
        "659b3ac4e3980221fbab6620": {
          "type": "setV2",
          "data": {
            "name": "",
            "sets": [
              {
                "type": "advance",
                "variable": "apiOpenWeather",
                "expression": "''"
              }
            ],
            "title": "API OPENWEATHER",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "65529a6c5324bea305b93154",
                  "id": "659b3ac4e3980221fbab6621",
                  "data": {}
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "659b3ac4e3980221fbab6620"
        }
      },
      "offsetX": 660.3784532606145,
      "offsetY": 781.3489202677721,
      "modified": 1699999587,
      "creatorID": 299371,
      "variables": [],
      "menuItems": [
        {
          "type": "NODE",
          "sourceID": "start00000000000000000000"
        }
      ],
      "menuNodeIDs": [],
      "intentStepIDs": [],
      "_id": "659755d05643e2ffb19c1383",
      "diagramID": "6552806214b35500124bdae9",
      "versionID": "659755d05643e2ffb19c1381"
    },
    "6552806214b35500124bdae8": {
      "name": "Template Diagram",
      "type": "TEMPLATE",
      "zoom": 100,
      "nodes": {
        "6438725334aead00076d562e": {
          "type": "start",
          "nodeID": "6438725334aead00076d562e",
          "coords": [
            360,
            120
          ],
          "data": {
            "name": "Start",
            "color": "#43494E",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "id": "6438725334aead00076d562f",
                  "type": "next",
                  "target": null
                }
              },
              "dynamic": []
            },
            "steps": []
          }
        },
        "6438725382cf9d2273b90589": {
          "type": "block",
          "data": {
            "name": "Welcome",
            "color": "",
            "steps": [
              "6438725382cf9d2273b9058d",
              "6438725382cf9d2273b90590"
            ]
          },
          "nodeID": "6438725382cf9d2273b90589",
          "coords": [
            -501.3585020507189,
            -658.0432780543358
          ]
        },
        "6438725382cf9d2273b9058b": {
          "type": "block",
          "data": {
            "name": "AI response output",
            "color": "#56b365",
            "steps": [
              "6438725382cf9d2273b90594"
            ]
          },
          "nodeID": "6438725382cf9d2273b9058b",
          "coords": [
            -501.5967776582388,
            -377.8379726840851
          ]
        },
        "6438725382cf9d2273b9058d": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "s27ac3eqh",
                "content": [
                  {
                    "children": [
                      {
                        "text": "Ask any question",
                        "fontWeight": "700"
                      },
                      {
                        "text": ", and we'll use the response AI step to provide a contextual response."
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "6438725382cf9d2273b90590",
                  "id": "6438725382cf9d2273b9058e"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "6438725382cf9d2273b9058d"
        },
        "6438725382cf9d2273b90590": {
          "type": "captureV2",
          "data": {
            "name": "Capture",
            "intentScope": "GLOBAL",
            "capture": {
              "type": "query",
              "variable": "last_utterance"
            },
            "noReply": null,
            "noMatch": null,
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "6438725382cf9d2273b9058b",
                  "id": "6438725382cf9d2273b90591",
                  "data": {
                    "points": [
                      {
                        "point": [
                          -667.3584635404925,
                          -461.54329806524055
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": true,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -691.3584635404925,
                          -461.54329806524055
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -691.3584635404925,
                          -401.83801893781236
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -501.59680258692276,
                          -401.83801893781236
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -501.59680258692276,
                          -377.83801893781236
                        ],
                        "toTop": true,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": true
                      }
                    ]
                  }
                },
                "else": {
                  "type": "else",
                  "target": null,
                  "id": "6438725382cf9d2273b90592"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "6438725382cf9d2273b90590"
        },
        "6438725382cf9d2273b90594": {
          "type": "generative",
          "data": {
            "name": "Response AI",
            "prompt": "Based on the users response {{[last_utterance].last_utterance}}, respond to the user",
            "system": "You are a helpful assistant",
            "maxTokens": 100,
            "model": "gpt-4",
            "temperature": 0.7,
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": null,
                  "id": "6438725382cf9d2273b90595",
                  "data": {
                    "points": [
                      {
                        "point": [
                          -335.5969201040813,
                          -275.58805327852497
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -295.1503869009563,
                          -275.58805327852497
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -295.1503869009563,
                          -631.39591460665
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -254.70385369783128,
                          -631.39591460665
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": true
                      }
                    ]
                  }
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "6438725382cf9d2273b90594"
        },
        "643872d482cf9d2273b905df": {
          "type": "block",
          "data": {
            "name": "Option 2",
            "color": "",
            "steps": [
              "643872d482cf9d2273b905e5"
            ]
          },
          "nodeID": "643872d482cf9d2273b905df",
          "coords": [
            -432.02299332274276,
            -334.73425308247994
          ]
        },
        "643872d482cf9d2273b905e1": {
          "type": "block",
          "data": {
            "name": "Start Block",
            "color": "#5b9fd7",
            "steps": [
              "643872d482cf9d2273b905e8",
              "643872d482cf9d2273b905eb"
            ]
          },
          "nodeID": "643872d482cf9d2273b905e1",
          "coords": [
            -845.4801744371416,
            -539.5792694267975
          ]
        },
        "643872d482cf9d2273b905e3": {
          "type": "block",
          "data": {
            "name": "Option 1",
            "color": "",
            "steps": [
              "643872d482cf9d2273b905f0"
            ]
          },
          "nodeID": "643872d482cf9d2273b905e3",
          "coords": [
            -430.5038187460724,
            -569.9756266907931
          ]
        },
        "643872d482cf9d2273b905e5": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "lu9tb340d",
                "content": [
                  {
                    "children": [
                      {
                        "text": "Second Option"
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": null,
                  "id": "643872d482cf9d2273b905e6"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643872d482cf9d2273b905e5"
        },
        "643872d482cf9d2273b905e8": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "929q734a2",
                "content": [
                  {
                    "children": [
                      {
                        "text": "How can I help you?"
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "643872d482cf9d2273b905eb",
                  "id": "643872d482cf9d2273b905e9"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643872d482cf9d2273b905e8"
        },
        "643872d482cf9d2273b905eb": {
          "type": "buttons",
          "data": {
            "name": "Buttons",
            "noMatch": null,
            "buttons": [
              {
                "id": "xr9vd34tj",
                "name": "Path 1",
                "actions": []
              },
              {
                "id": "cl9vs34c7",
                "name": "Path 2",
                "actions": []
              }
            ],
            "noReply": null,
            "intentScope": "GLOBAL",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "else": {
                  "type": "else",
                  "target": null,
                  "id": "643872d482cf9d2273b905ec"
                }
              },
              "dynamic": [
                {
                  "type": "",
                  "target": "643872d482cf9d2273b905e3",
                  "id": "643872d482cf9d2273b905ed",
                  "data": {
                    "points": [
                      {
                        "point": [
                          -679.4801667002234,
                          -399.32923837159325
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -637.4918741411055,
                          -399.32923837159325
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -637.4918741411055,
                          -542.9755028741506
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -595.5035815819875,
                          -542.9755028741506
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": true
                      }
                    ]
                  }
                },
                {
                  "type": "",
                  "target": "643872d482cf9d2273b905df",
                  "id": "643872d482cf9d2273b905ee",
                  "data": {
                    "points": [
                      {
                        "point": [
                          -679.4801667002234,
                          -344.82921901334083
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -638.2515780028617,
                          -344.82921901334083
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -638.2515780028617,
                          -307.73401942975823
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -597.0229893055001,
                          -307.73401942975823
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": true
                      }
                    ]
                  }
                }
              ]
            }
          },
          "nodeID": "643872d482cf9d2273b905eb"
        },
        "643872d482cf9d2273b905f0": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "ky9ry343w",
                "content": [
                  {
                    "children": [
                      {
                        "text": "First Option"
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": null,
                  "id": "643872d482cf9d2273b905f1"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643872d482cf9d2273b905f0"
        },
        "643873be82cf9d2273b90673": {
          "type": "block",
          "data": {
            "name": "If userID does not equal 1234",
            "color": "",
            "steps": [
              "643873be82cf9d2273b9067b"
            ]
          },
          "nodeID": "643873be82cf9d2273b90673",
          "coords": [
            -70.18718316214228,
            -25.420796792411338
          ]
        },
        "643873be82cf9d2273b90675": {
          "type": "block",
          "data": {
            "name": "Use Logic to Route",
            "color": "#CB627B",
            "steps": [
              "643873be82cf9d2273b9067e"
            ]
          },
          "nodeID": "643873be82cf9d2273b90675",
          "coords": [
            -471.1075336325476,
            -185.10154694620218
          ]
        },
        "643873be82cf9d2273b90677": {
          "type": "block",
          "data": {
            "name": "If userID equals 1234",
            "color": "",
            "steps": [
              "643873be82cf9d2273b90682"
            ]
          },
          "nodeID": "643873be82cf9d2273b90677",
          "coords": [
            -71.43718316214228,
            -184.17079679241147
          ]
        },
        "643873be82cf9d2273b90679": {
          "type": "block",
          "data": {
            "name": "Capture Information",
            "color": "",
            "steps": [
              "643873be82cf9d2273b90685",
              "643873be82cf9d2273b90688"
            ]
          },
          "nodeID": "643873be82cf9d2273b90679",
          "coords": [
            -882.7180111791258,
            -186.51117186930696
          ]
        },
        "643873be82cf9d2273b9067b": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "1jabe34gf",
                "content": [
                  {
                    "children": [
                      {
                        "text": "Welcome to Voiceflow user "
                      },
                      {
                        "id": "user_id",
                        "name": "user_id",
                        "isSlot": false,
                        "type": "variable",
                        "children": [
                          {
                            "text": ""
                          }
                        ]
                      },
                      {
                        "text": " "
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": null,
                  "id": "643873be82cf9d2273b9067c"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643873be82cf9d2273b9067b"
        },
        "643873be82cf9d2273b9067e": {
          "type": "ifV2",
          "data": {
            "name": "If",
            "expressions": [
              {
                "type": null,
                "name": "If UserID = 1234",
                "value": [
                  {
                    "logicInterface": "variable",
                    "type": "equals",
                    "value": [
                      {
                        "type": "variable",
                        "value": "user_id"
                      },
                      {
                        "type": "value",
                        "value": "1234"
                      }
                    ]
                  }
                ]
              }
            ],
            "noMatch": {
              "type": "path",
              "pathName": "All other UserIDs"
            },
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "else": {
                  "type": "else",
                  "target": "643873be82cf9d2273b90673",
                  "id": "643873be82cf9d2273b9067f",
                  "data": {
                    "points": [
                      {
                        "point": [
                          -305.10758119605924,
                          -50.851426165918596
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -270.147315082778,
                          -50.851426165918596
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -270.147315082778,
                          1.57917686142504
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -235.18704896949674,
                          1.57917686142504
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": true
                      }
                    ]
                  }
                }
              },
              "dynamic": [
                {
                  "type": "",
                  "target": "643873be82cf9d2273b90677",
                  "id": "643873be82cf9d2273b90680",
                  "data": {
                    "points": [
                      {
                        "point": [
                          -305.10758119605924,
                          -105.35139564834047
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -270.7723150827781,
                          -105.35139564834047
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -270.7723150827781,
                          -157.17082313857486
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -236.43704896949686,
                          -157.17082313857486
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": true
                      }
                    ],
                    "event": {
                      "type": "If UserID = 1234"
                    }
                  }
                }
              ]
            }
          },
          "nodeID": "643873be82cf9d2273b9067e"
        },
        "643873be82cf9d2273b90682": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "1jabe34gf",
                "content": [
                  {
                    "children": [
                      {
                        "text": "Welcome back user "
                      },
                      {
                        "id": "user_id",
                        "name": "user_id",
                        "isSlot": false,
                        "type": "variable",
                        "children": [
                          {
                            "text": ""
                          }
                        ]
                      },
                      {
                        "text": " "
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": null,
                  "id": "643873be82cf9d2273b90683"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643873be82cf9d2273b90682"
        },
        "643873be82cf9d2273b90685": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "s8a30349g",
                "content": [
                  {
                    "children": [
                      {
                        "text": "What is your userID?"
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "643873be82cf9d2273b90688",
                  "id": "643873be82cf9d2273b90686"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643873be82cf9d2273b90685"
        },
        "643873be82cf9d2273b90688": {
          "type": "captureV2",
          "data": {
            "name": "Capture",
            "intentScope": "GLOBAL",
            "capture": {
              "type": "query",
              "variable": "user_id"
            },
            "noReply": null,
            "noMatch": null,
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "643873be82cf9d2273b90675",
                  "id": "643873be82cf9d2273b90689",
                  "data": {
                    "points": [
                      {
                        "point": [
                          -716.7179552552856,
                          -35.01107937987875
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -676.4127121801628,
                          -35.01107937987875
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -676.4127121801628,
                          -158.10137487284737
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -636.1074691050399,
                          -158.10137487284737
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": true
                      }
                    ]
                  }
                },
                "else": {
                  "type": "else",
                  "target": null,
                  "id": "643873be82cf9d2273b9068a"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643873be82cf9d2273b90688"
        },
        "643874b482cf9d2273b90953": {
          "type": "block",
          "data": {
            "name": "Set AI",
            "color": "#56b365",
            "steps": [
              "643874b482cf9d2273b9095b",
              "643874b482cf9d2273b9095e"
            ]
          },
          "nodeID": "643874b482cf9d2273b90953",
          "coords": [
            -321.72987951219045,
            -63.307659112696115
          ]
        },
        "643874b482cf9d2273b90955": {
          "type": "block",
          "data": {
            "name": "Set AI sample",
            "color": "",
            "steps": [
              "643874b482cf9d2273b90961",
              "643874b482cf9d2273b90964",
              "643874b482cf9d2273b90967",
              "643874b482cf9d2273b9096a"
            ]
          },
          "nodeID": "643874b482cf9d2273b90955",
          "coords": [
            -327.19954974607606,
            -531.5846547683695
          ]
        },
        "643874b482cf9d2273b90957": {
          "type": "block",
          "data": {
            "name": "Welcome",
            "color": "#000000",
            "steps": [
              "643874b482cf9d2273b9096e",
              "643874b482cf9d2273b90971",
              "643874b482cf9d2273b90974"
            ]
          },
          "nodeID": "643874b482cf9d2273b90957",
          "coords": [
            -759.89470620039,
            -534.1559019190823
          ]
        },
        "643874b482cf9d2273b90959": {
          "type": "block",
          "data": {
            "name": "AI response output",
            "color": "#56b365",
            "steps": [
              "643874b482cf9d2273b90978"
            ]
          },
          "nodeID": "643874b482cf9d2273b90959",
          "coords": [
            -761.5579531610629,
            -134.2530028839701
          ]
        },
        "643874b482cf9d2273b9095b": {
          "type": "ai_set",
          "data": {
            "name": "AI Set",
            "label": "Classify the users sentiment",
            "sets": [
              {
                "prompt": "using the last response {{[last_response].last_response}}, classify the users sentiment as a single word",
                "variable": "sentiment"
              }
            ],
            "system": "",
            "maxTokens": 10,
            "model": "gpt-4",
            "temperature": 0,
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "643874b482cf9d2273b9095e",
                  "id": "643874b482cf9d2273b9095c",
                  "data": {}
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643874b482cf9d2273b9095b"
        },
        "643874b482cf9d2273b9095e": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "wm8on3eh5",
                "content": [
                  {
                    "children": [
                      {
                        "text": "Based on your input, I classified your sentiment as: "
                      },
                      {
                        "id": "sentiment",
                        "name": "sentiment",
                        "isSlot": false,
                        "type": "variable",
                        "children": [
                          {
                            "text": ""
                          }
                        ]
                      },
                      {
                        "text": ""
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": null,
                  "id": "643874b482cf9d2273b9095f",
                  "data": {
                    "points": [
                      {
                        "point": [
                          -33.0240778694905,
                          -124.93501293502982
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": true,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -57.0240778694905,
                          -124.93501293502982
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -57.0240778694905,
                          -50.434861800112
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          122.77381608300391,
                          -50.434861800112
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          122.77381608300391,
                          -6.044306016441283
                        ],
                        "toTop": true,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": true
                      }
                    ]
                  }
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643874b482cf9d2273b9095e"
        },
        "643874b482cf9d2273b90961": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "xg77r3eyi",
                "content": [
                  {
                    "children": [
                      {
                        "text": "The 'Set AI' step allows you to set variables from a prompt you define."
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "643874b482cf9d2273b90964",
                  "id": "643874b482cf9d2273b90962"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643874b482cf9d2273b90961"
        },
        "643874b482cf9d2273b90964": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "1l9zc3eha",
                "content": [
                  {
                    "children": [
                      {
                        "text": "You might be thinking... \"what in the world does that mean?\". Well, lets just test an example."
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "643874b482cf9d2273b90967",
                  "id": "643874b482cf9d2273b90965"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643874b482cf9d2273b90964"
        },
        "643874b482cf9d2273b90967": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "s27ac3eqh",
                "content": [
                  {
                    "children": [
                      {
                        "text": "say anything",
                        "fontWeight": "700"
                      },
                      {
                        "text": ", and we'll use the 'Set AI' step to classify your sentimet, and map it to a variable"
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "643874b482cf9d2273b9096a",
                  "id": "643874b482cf9d2273b90968"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643874b482cf9d2273b90967"
        },
        "643874b482cf9d2273b9096a": {
          "type": "captureV2",
          "data": {
            "name": "Capture",
            "intentScope": "GLOBAL",
            "capture": {
              "type": "query",
              "variable": "last_response"
            },
            "noReply": null,
            "noMatch": null,
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "643874b482cf9d2273b90953",
                  "id": "643874b482cf9d2273b9096b",
                  "data": {
                    "points": [
                      {
                        "point": [
                          -161.1994343750199,
                          -146.5846603522872
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -137.1994343750199,
                          -146.5846603522872
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -137.1994343750199,
                          -87.30750455475197
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -321.7298913547405,
                          -87.30750455475197
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -321.7298913547405,
                          -63.30750455475197
                        ],
                        "toTop": true,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": true
                      }
                    ]
                  }
                },
                "else": {
                  "type": "else",
                  "target": null,
                  "id": "643874b482cf9d2273b9096c"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643874b482cf9d2273b9096a"
        },
        "643874b482cf9d2273b9096e": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "xg77r3eyi",
                "content": [
                  {
                    "children": [
                      {
                        "text": "The 'Response AI' step allows you to dynamically create responses based on a prompt that you define."
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "643874b482cf9d2273b90971",
                  "id": "643874b482cf9d2273b9096f"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643874b482cf9d2273b9096e"
        },
        "643874b482cf9d2273b90971": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "s27ac3eqh",
                "content": [
                  {
                    "children": [
                      {
                        "text": "Ask any question",
                        "fontWeight": "700"
                      },
                      {
                        "text": ", and we'll use the response AI step to provide a contextual response."
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "643874b482cf9d2273b90974",
                  "id": "643874b482cf9d2273b90972"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643874b482cf9d2273b90971"
        },
        "643874b482cf9d2273b90974": {
          "type": "captureV2",
          "data": {
            "name": "Capture",
            "intentScope": "GLOBAL",
            "capture": {
              "type": "query",
              "variable": "last_utterance"
            },
            "noReply": null,
            "noMatch": null,
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "643874b482cf9d2273b90959",
                  "id": "643874b482cf9d2273b90975",
                  "data": {
                    "points": [
                      {
                        "point": [
                          -925.8947036771242,
                          -232.1558252080962
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": true,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -949.8947036771242,
                          -232.1558252080962
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -949.8947036771242,
                          -158.25288311712643
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -761.5580320167377,
                          -158.25288311712643
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -761.5580320167377,
                          -134.25288311712643
                        ],
                        "toTop": true,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": true
                      }
                    ]
                  }
                },
                "else": {
                  "type": "else",
                  "target": null,
                  "id": "643874b482cf9d2273b90976"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643874b482cf9d2273b90974"
        },
        "643874b482cf9d2273b90978": {
          "type": "generative",
          "data": {
            "name": "Response AI",
            "prompt": "Based on the users response {{[last_utterance].last_utterance}}, respond to the user",
            "system": "You are a helpful assistant",
            "maxTokens": 100,
            "model": "gpt-4",
            "temperature": 0.7,
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "643874b482cf9d2273b90955",
                  "id": "643874b482cf9d2273b90979",
                  "data": {
                    "points": [
                      {
                        "point": [
                          -595.5579080797152,
                          -32.00283908686845
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -543.8787386317132,
                          -32.00283908686845
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -543.8787386317132,
                          -504.584540763932
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -492.19956918371133,
                          -504.584540763932
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": true
                      }
                    ]
                  }
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643874b482cf9d2273b90978"
        },
        "643874d182cf9d2273b909e8": {
          "type": "block",
          "data": {
            "name": "Welcome",
            "color": "#000000",
            "steps": [
              "643874d182cf9d2273b909ec",
              "643874d182cf9d2273b909ef",
              "643874d182cf9d2273b909f2"
            ]
          },
          "nodeID": "643874d182cf9d2273b909e8",
          "coords": [
            -372.37350578661807,
            -483.0309031257145
          ]
        },
        "643874d182cf9d2273b909ea": {
          "type": "block",
          "data": {
            "name": "AI response output",
            "color": "#56b365",
            "steps": [
              "643874d182cf9d2273b909f6"
            ]
          },
          "nodeID": "643874d182cf9d2273b909ea",
          "coords": [
            -374.0367527472909,
            -83.12800409060253
          ]
        },
        "643874d182cf9d2273b909ec": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "xg77r3eyi",
                "content": [
                  {
                    "children": [
                      {
                        "text": "The 'Response AI' step allows you to dynamically create responses based on a prompt that you define."
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "643874d182cf9d2273b909ef",
                  "id": "643874d182cf9d2273b909ed"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643874d182cf9d2273b909ec"
        },
        "643874d182cf9d2273b909ef": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "s27ac3eqh",
                "content": [
                  {
                    "children": [
                      {
                        "text": "Ask any question",
                        "fontWeight": "700"
                      },
                      {
                        "text": ", and we'll use the response AI step to provide a contextual response."
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "643874d182cf9d2273b909f2",
                  "id": "643874d182cf9d2273b909f0"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643874d182cf9d2273b909ef"
        },
        "643874d182cf9d2273b909f2": {
          "type": "captureV2",
          "data": {
            "name": "Capture",
            "intentScope": "GLOBAL",
            "capture": {
              "type": "query",
              "variable": "last_utterance"
            },
            "noReply": null,
            "noMatch": null,
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "643874d182cf9d2273b909ea",
                  "id": "643874d182cf9d2273b909f3",
                  "data": {
                    "points": [
                      {
                        "point": [
                          -538.3737632125188,
                          -181.03060602450773
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": true,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -562.3737632125188,
                          -181.03060602450773
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -562.3737632125188,
                          -107.12783788023637
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -374.0367436587356,
                          -107.12783788023637
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -374.0367436587356,
                          -83.12783788023637
                        ],
                        "toTop": true,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": true
                      }
                    ]
                  }
                },
                "else": {
                  "type": "else",
                  "target": null,
                  "id": "643874d182cf9d2273b909f4"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643874d182cf9d2273b909f2"
        },
        "643874d182cf9d2273b909f6": {
          "type": "generative",
          "data": {
            "name": "Response AI",
            "prompt": "Based on the users response {{[last_utterance].last_utterance}}, respond to the user",
            "system": "You are a helpful assistant",
            "maxTokens": 100,
            "model": "gpt-4",
            "temperature": 0.7,
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": null,
                  "id": "643874d182cf9d2273b909f7",
                  "data": {
                    "points": [
                      {
                        "point": [
                          -203.5519554349242,
                          -274.8466263502904
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -163.1054222317992,
                          -274.8466263502904
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -163.1054222317992,
                          -630.6544876784154
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -122.6588890286742,
                          -630.6544876784154
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": true
                      }
                    ]
                  }
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643874d182cf9d2273b909f6"
        },
        "643874eb82cf9d2273b909fa": {
          "type": "block",
          "data": {
            "name": "Set AI",
            "color": "#56b365",
            "steps": [
              "643874eb82cf9d2273b909fe",
              "643874eb82cf9d2273b90a01"
            ]
          },
          "nodeID": "643874eb82cf9d2273b909fa",
          "coords": [
            -556.9039789499768,
            -48.940886202522734
          ]
        },
        "643874eb82cf9d2273b909fc": {
          "type": "block",
          "data": {
            "name": "Set AI sample",
            "color": "",
            "steps": [
              "643874eb82cf9d2273b90a04",
              "643874eb82cf9d2273b90a07",
              "643874eb82cf9d2273b90a0a",
              "643874eb82cf9d2273b90a0d"
            ]
          },
          "nodeID": "643874eb82cf9d2273b909fc",
          "coords": [
            -562.3736491838624,
            -517.2178818581958
          ]
        },
        "643874eb82cf9d2273b909fe": {
          "type": "ai_set",
          "data": {
            "name": "AI Set",
            "label": "Classify the users sentiment",
            "sets": [
              {
                "prompt": "using the last response {{[last_response].last_response}}, classify the users sentiment as a single word",
                "variable": "sentiment"
              }
            ],
            "system": "",
            "maxTokens": 10,
            "model": "gpt-4",
            "temperature": 0,
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "643874eb82cf9d2273b90a01",
                  "id": "643874eb82cf9d2273b909ff",
                  "data": {}
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643874eb82cf9d2273b909fe"
        },
        "643874eb82cf9d2273b90a01": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "wm8on3eh5",
                "content": [
                  {
                    "children": [
                      {
                        "text": "Based on your input, I classified your sentiment as: "
                      },
                      {
                        "id": "sentiment",
                        "name": "sentiment",
                        "isSlot": false,
                        "type": "variable",
                        "children": [
                          {
                            "text": ""
                          }
                        ]
                      },
                      {
                        "text": ""
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": null,
                  "id": "643874eb82cf9d2273b90a02",
                  "data": {
                    "points": [
                      {
                        "point": [
                          -261.0733205415116,
                          -210.31623474557398
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": true,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -285.0733205415116,
                          -210.31623474557398
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -285.0733205415116,
                          -135.81608361065616
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -105.27542658901717,
                          -135.81608361065616
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -105.27542658901717,
                          -91.42552782698544
                        ],
                        "toTop": true,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": true
                      }
                    ]
                  }
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643874eb82cf9d2273b90a01"
        },
        "643874eb82cf9d2273b90a04": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "xg77r3eyi",
                "content": [
                  {
                    "children": [
                      {
                        "text": "The 'Set AI' step allows you to set variables from a prompt you define."
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "643874eb82cf9d2273b90a07",
                  "id": "643874eb82cf9d2273b90a05"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643874eb82cf9d2273b90a04"
        },
        "643874eb82cf9d2273b90a07": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "1l9zc3eha",
                "content": [
                  {
                    "children": [
                      {
                        "text": "You might be thinking... \"what in the world does that mean?\". Well, lets just test an example."
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "643874eb82cf9d2273b90a0a",
                  "id": "643874eb82cf9d2273b90a08"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643874eb82cf9d2273b90a07"
        },
        "643874eb82cf9d2273b90a0a": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "s27ac3eqh",
                "content": [
                  {
                    "children": [
                      {
                        "text": "say anything",
                        "fontWeight": "700"
                      },
                      {
                        "text": ", and we'll use the 'Set AI' step to classify your sentimet, and map it to a variable"
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "643874eb82cf9d2273b90a0d",
                  "id": "643874eb82cf9d2273b90a0b"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643874eb82cf9d2273b90a0a"
        },
        "643874eb82cf9d2273b90a0d": {
          "type": "captureV2",
          "data": {
            "name": "Capture",
            "intentScope": "GLOBAL",
            "capture": {
              "type": "query",
              "variable": "last_response"
            },
            "noReply": null,
            "noMatch": null,
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "643874eb82cf9d2273b909fa",
                  "id": "643874eb82cf9d2273b90a0e",
                  "data": {
                    "points": [
                      {
                        "point": [
                          -396.3736198152747,
                          -132.21749310519454
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -372.3736198152747,
                          -132.21749310519454
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -372.3736198152747,
                          -72.94085914775496
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -556.9039028482964,
                          -72.94085914775496
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -556.9039028482964,
                          -48.94085914775496
                        ],
                        "toTop": true,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": true
                      }
                    ]
                  }
                },
                "else": {
                  "type": "else",
                  "target": null,
                  "id": "643874eb82cf9d2273b90a0f"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "643874eb82cf9d2273b90a0d"
        },
        "6438784f82cf9d2273b90dd4": {
          "type": "block",
          "data": {
            "name": "Use Logic to Route",
            "color": "#dc8879",
            "steps": [
              "6438784f82cf9d2273b90ddc"
            ]
          },
          "nodeID": "6438784f82cf9d2273b90dd4",
          "coords": [
            -1964.4846386537488,
            -626.9744457114995
          ]
        },
        "6438784f82cf9d2273b90dd6": {
          "type": "block",
          "data": {
            "name": "Capture Information",
            "color": "#dc8879",
            "steps": [
              "6438784f82cf9d2273b90de0",
              "6438784f82cf9d2273b90de3"
            ]
          },
          "nodeID": "6438784f82cf9d2273b90dd6",
          "coords": [
            -2376.095116200327,
            -628.3840706346044
          ]
        },
        "6438784f82cf9d2273b90dd8": {
          "type": "block",
          "data": {
            "name": "Other names",
            "color": "#dc8879",
            "steps": [
              "6438784f82cf9d2273b90de7"
            ]
          },
          "nodeID": "6438784f82cf9d2273b90dd8",
          "coords": [
            -1563.5642881833433,
            -467.2936955577087
          ]
        },
        "6438784f82cf9d2273b90dda": {
          "type": "block",
          "data": {
            "name": "Elon Musk",
            "color": "#dc8879",
            "steps": [
              "6438784f82cf9d2273b90dea"
            ]
          },
          "nodeID": "6438784f82cf9d2273b90dda",
          "coords": [
            -1564.8142881833433,
            -626.0436955577089
          ]
        },
        "6438784f82cf9d2273b90ddc": {
          "type": "ifV2",
          "data": {
            "name": "If",
            "expressions": [
              {
                "type": null,
                "name": "If name is elon musk",
                "value": [
                  {
                    "logicInterface": "variable",
                    "type": "equals",
                    "value": [
                      {
                        "type": "variable",
                        "value": "name"
                      },
                      {
                        "type": "value",
                        "value": "elon musk"
                      }
                    ]
                  }
                ]
              }
            ],
            "noMatch": {
              "type": "path",
              "pathName": "All other names"
            },
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "else": {
                  "type": "else",
                  "target": "6438784f82cf9d2273b90dd8",
                  "id": "6438784f82cf9d2273b90ddd",
                  "data": {
                    "points": [
                      {
                        "point": [
                          -1798.484505972181,
                          -492.72447921623757
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -1763.5243607307511,
                          -492.72447921623757
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -1763.5243607307511,
                          -440.2937029472216
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -1728.5642154893217,
                          -440.2937029472216
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": true
                      }
                    ]
                  }
                }
              },
              "dynamic": [
                {
                  "type": "",
                  "target": "6438784f82cf9d2273b90dda",
                  "id": "6438784f82cf9d2273b90dde",
                  "data": {
                    "points": [
                      {
                        "point": [
                          -1798.484505972181,
                          -547.2244999131336
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -1764.1493300508728,
                          -547.2244999131336
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -1764.1493300508728,
                          -599.0438504799286
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -1729.814154129565,
                          -599.0438504799286
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": true
                      }
                    ],
                    "event": {
                      "type": "If name is elon musk"
                    }
                  }
                }
              ]
            }
          },
          "nodeID": "6438784f82cf9d2273b90ddc"
        },
        "6438784f82cf9d2273b90de0": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "s8a30349g",
                "content": [
                  {
                    "children": [
                      {
                        "text": "What is your name?"
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "6438784f82cf9d2273b90de3",
                  "id": "6438784f82cf9d2273b90de1"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "6438784f82cf9d2273b90de0"
        },
        "6438784f82cf9d2273b90de3": {
          "type": "captureV2",
          "data": {
            "name": "Capture",
            "intentScope": "GLOBAL",
            "capture": {
              "type": "query",
              "variable": "name"
            },
            "noReply": null,
            "noMatch": null,
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "6438784f82cf9d2273b90dd4",
                  "id": "6438784f82cf9d2273b90de4",
                  "data": {
                    "points": [
                      {
                        "point": [
                          -2210.0950799471193,
                          -488.1341077200336
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -2169.789872823509,
                          -488.1341077200336
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -2169.789872823509,
                          -599.9743336839742
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -2129.484665699899,
                          -599.9743336839742
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": true
                      }
                    ]
                  }
                },
                "else": {
                  "type": "else",
                  "target": null,
                  "id": "6438784f82cf9d2273b90de5"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "6438784f82cf9d2273b90de3"
        },
        "6438784f82cf9d2273b90de7": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "1jabe34gf",
                "content": [
                  {
                    "children": [
                      {
                        "text": "Hello "
                      },
                      {
                        "id": "name",
                        "name": "name",
                        "isSlot": false,
                        "type": "variable",
                        "children": [
                          {
                            "text": ""
                          }
                        ]
                      },
                      {
                        "text": " !"
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": null,
                  "id": "6438784f82cf9d2273b90de8"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "6438784f82cf9d2273b90de7"
        },
        "6438784f82cf9d2273b90dea": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "1jabe34gf",
                "content": [
                  {
                    "children": [
                      {
                        "text": "Twitter is the best 🐦"
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": null,
                  "id": "6438784f82cf9d2273b90deb"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "6438784f82cf9d2273b90dea"
        },
        "645d6f1383103cca7a3ce732": {
          "type": "block",
          "data": {
            "name": "Welcome",
            "color": "#56b365",
            "steps": [
              "645d6f1383103cca7a3ce736",
              "645d6f1383103cca7a3ce739",
              "645d6f1383103cca7a3ce73c"
            ]
          },
          "nodeID": "645d6f1383103cca7a3ce732",
          "coords": [
            -535.4719325269735,
            -4.484361157018327
          ]
        },
        "645d6f1383103cca7a3ce734": {
          "type": "block",
          "data": {
            "name": "AI response output",
            "color": "#56b365",
            "steps": [
              "645d6f1383103cca7a3ce740"
            ]
          },
          "nodeID": "645d6f1383103cca7a3ce734",
          "coords": [
            -537.1351794876463,
            395.41853787809356
          ]
        },
        "645d6f1383103cca7a3ce736": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "xg77r3eyi",
                "content": [
                  {
                    "children": [
                      {
                        "text": "The 'Response AI' step allows you to dynamically create responses based on a prompt that you define."
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "645d6f1383103cca7a3ce739",
                  "id": "645d6f1383103cca7a3ce737"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "645d6f1383103cca7a3ce736"
        },
        "645d6f1383103cca7a3ce739": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "s27ac3eqh",
                "content": [
                  {
                    "children": [
                      {
                        "text": "Ask any question",
                        "fontWeight": "700"
                      },
                      {
                        "text": ", and we'll use the response AI step to provide a contextual response."
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "645d6f1383103cca7a3ce73c",
                  "id": "645d6f1383103cca7a3ce73a"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "645d6f1383103cca7a3ce739"
        },
        "645d6f1383103cca7a3ce73c": {
          "type": "captureV2",
          "data": {
            "name": "Capture",
            "intentScope": "GLOBAL",
            "capture": {
              "type": "query",
              "variable": "last_utterance"
            },
            "noReply": null,
            "noMatch": null,
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "645d6f1383103cca7a3ce734",
                  "id": "645d6f1383103cca7a3ce73d",
                  "data": {
                    "points": [
                      {
                        "point": [
                          -701.4692078069633,
                          297.5201460803028
                        ],
                        "reversed": true
                      },
                      {
                        "point": [
                          -725.4692078069633,
                          297.5201460803028
                        ]
                      },
                      {
                        "point": [
                          -725.4692078069633,
                          371.4201460803028
                        ]
                      },
                      {
                        "point": [
                          -537.1392078069632,
                          371.4201460803028
                        ]
                      },
                      {
                        "point": [
                          -537.1392078069632,
                          395.4201460803029
                        ],
                        "toTop": true,
                        "allowedToTop": true
                      }
                    ]
                  }
                },
                "else": {
                  "type": "else",
                  "target": null,
                  "id": "645d6f1383103cca7a3ce73e"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "645d6f1383103cca7a3ce73c"
        },
        "645d6f1383103cca7a3ce740": {
          "type": "generative",
          "data": {
            "name": "Response AI",
            "prompt": "Based on the users question, respond with two brief sentences.",
            "system": "You are a helpful assistant",
            "maxTokens": 100,
            "model": "gpt-4",
            "temperature": 0.7,
            "mode": "memory_prompt",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": null,
                  "id": "645d6f1383103cca7a3ce741",
                  "data": {
                    "points": [
                      {
                        "point": [
                          -366.65038217527956,
                          203.69991561840578
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -326.20384897215456,
                          203.69991561840578
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -326.20384897215456,
                          -152.10794570971922
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": false
                      },
                      {
                        "point": [
                          -285.75731576902956,
                          -152.10794570971922
                        ],
                        "toTop": false,
                        "locked": false,
                        "reversed": false,
                        "allowedToTop": true
                      }
                    ]
                  }
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "645d6f1383103cca7a3ce740"
        },
        "645d718f83103cca7a3cecc1": {
          "type": "block",
          "data": {
            "name": "Fail",
            "color": "#5b9fd7",
            "steps": [
              "645d718f83103cca7a3cecc9"
            ]
          },
          "nodeID": "645d718f83103cca7a3cecc1",
          "coords": [
            -943.7641060825457,
            -726.7018427371622
          ]
        },
        "645d718f83103cca7a3cecc3": {
          "type": "block",
          "data": {
            "name": "API Call",
            "color": "#5b9fd7",
            "steps": [
              "645d718f83103cca7a3ceccc"
            ]
          },
          "nodeID": "645d718f83103cca7a3cecc3",
          "coords": [
            -1337.282813902139,
            -902.1537022731807
          ]
        },
        "645d718f83103cca7a3cecc5": {
          "type": "block",
          "data": {
            "name": "Welcome",
            "color": "#5b9fd7",
            "steps": [
              "645d718f83103cca7a3cecd0",
              "645d718f83103cca7a3cecd3"
            ]
          },
          "nodeID": "645d718f83103cca7a3cecc5",
          "coords": [
            -1722.1832079861151,
            -907.6478276212674
          ]
        },
        "645d718f83103cca7a3cecc7": {
          "type": "block",
          "data": {
            "name": "Success",
            "color": "#5b9fd7",
            "steps": [
              "645d718f83103cca7a3cecd7"
            ]
          },
          "nodeID": "645d718f83103cca7a3cecc7",
          "coords": [
            -944.844860096504,
            -900.8660415973322
          ]
        },
        "645d718f83103cca7a3cecc9": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "u08yz372g",
                "content": [
                  {
                    "children": [
                      {
                        "text": "Error"
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": null,
                  "id": "645d718f83103cca7a3cecca"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "645d718f83103cca7a3cecc9"
        },
        "645d718f83103cca7a3ceccc": {
          "type": "api",
          "data": {
            "name": "",
            "url": "https://api.openai.com/v1/completions",
            "body": [
              {
                "key": "",
                "val": ""
              }
            ],
            "params": [],
            "method": "POST",
            "headers": [
              {
                "key": "Content-Type",
                "val": "application/json"
              },
              {
                "key": "Authorization",
                "val": "Bearer <ADD API KEY HERE>"
              }
            ],
            "content": "{\n  \"model\": \"text-davinci-003\",\n  \"prompt\": \"{last_utterance}\",\n  \"max_tokens\": 7,\n  \"temperature\": 0,\n  \"top_p\": 1,\n  \"n\": 1,\n  \"stream\": false,\n  \"logprobs\": null,\n  \"stop\": \"\\n\"\n}",
            "mappings": [
              {
                "path": "response",
                "var": "response"
              }
            ],
            "bodyType": "rawInput",
            "selectedAction": "Make a POST Request",
            "selectedIntegration": "Custom API",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "645d718f83103cca7a3cecd7",
                  "id": "645d718f83103cca7a3cecce",
                  "data": {
                    "points": [
                      {
                        "point": [
                          -1171.2838307947716,
                          -748.4052156062919
                        ]
                      },
                      {
                        "point": [
                          -1141.0638307947715,
                          -748.4052156062919
                        ]
                      },
                      {
                        "point": [
                          -1141.0638307947715,
                          -821.3652156062917
                        ]
                      },
                      {
                        "point": [
                          -1110.8438307947717,
                          -821.3652156062917
                        ],
                        "allowedToTop": false
                      }
                    ]
                  }
                },
                "fail": {
                  "type": "fail",
                  "target": "645d718f83103cca7a3cecc9",
                  "id": "645d718f83103cca7a3ceccd",
                  "data": {
                    "points": [
                      {
                        "point": [
                          -1171.2838307947716,
                          -693.9052156062919
                        ]
                      },
                      {
                        "point": [
                          -1140.5238307947716,
                          -693.9052156062919
                        ]
                      },
                      {
                        "point": [
                          -1140.5238307947716,
                          -647.2052156062919
                        ]
                      },
                      {
                        "point": [
                          -1109.7638307947714,
                          -647.2052156062919
                        ],
                        "allowedToTop": false
                      }
                    ]
                  }
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "645d718f83103cca7a3ceccc"
        },
        "645d718f83103cca7a3cecd0": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "xg77r3eyi",
                "content": [
                  {
                    "children": [
                      {
                        "text": "This flow captures a users question and sends it to the OpenAI API"
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "645d718f83103cca7a3cecd3",
                  "id": "645d718f83103cca7a3cecd1"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "645d718f83103cca7a3cecd0"
        },
        "645d718f83103cca7a3cecd3": {
          "type": "captureV2",
          "data": {
            "name": "Capture",
            "intentScope": "GLOBAL",
            "capture": {
              "type": "query",
              "variable": "last_utterance"
            },
            "noReply": null,
            "noMatch": null,
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": "645d718f83103cca7a3cecc3",
                  "id": "645d718f83103cca7a3cecd4",
                  "data": {
                    "points": [
                      {
                        "point": [
                          -1556.1838307947714,
                          -733.6452156062919
                        ]
                      },
                      {
                        "point": [
                          -1529.2338307947716,
                          -733.6452156062919
                        ]
                      },
                      {
                        "point": [
                          -1529.2338307947716,
                          -875.1552156062919
                        ]
                      },
                      {
                        "point": [
                          -1502.2838307947716,
                          -875.1552156062919
                        ],
                        "allowedToTop": true
                      }
                    ]
                  }
                },
                "else": {
                  "type": "else",
                  "target": null,
                  "id": "645d718f83103cca7a3cecd5"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "645d718f83103cca7a3cecd3"
        },
        "645d718f83103cca7a3cecd7": {
          "type": "text",
          "data": {
            "name": "Text",
            "texts": [
              {
                "id": "vh8xb37hw",
                "content": [
                  {
                    "children": [
                      {
                        "text": ""
                      },
                      {
                        "id": "response",
                        "name": "response",
                        "isSlot": false,
                        "type": "variable",
                        "children": [
                          {
                            "text": ""
                          }
                        ]
                      },
                      {
                        "text": " "
                      }
                    ]
                  }
                ]
              }
            ],
            "canvasVisibility": "preview",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": null,
                  "id": "645d718f83103cca7a3cecd8"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "645d718f83103cca7a3cecd7"
        },
        "65529b445324bea305b9317e": {
          "type": "api",
          "data": {
            "name": "",
            "url": "https://api.openai.com/v1/threads",
            "body": [],
            "params": [],
            "method": "POST",
            "headers": [
              {
                "key": "Content-Type",
                "val": "application/json"
              },
              {
                "key": "Authorization",
                "val": "Bearer {{[apiKey].apiKey}}"
              },
              {
                "key": "OpenAI-Beta",
                "val": "assistants=v1"
              }
            ],
            "content": "",
            "mappings": [],
            "bodyType": "formData",
            "selectedAction": "Make a POST Request",
            "selectedIntegration": "Custom API",
            "portsV2": {
              "byKey": {},
              "builtIn": {
                "next": {
                  "type": "next",
                  "target": null,
                  "id": "65529b445324bea305b9317f"
                },
                "fail": {
                  "type": "fail",
                  "target": null,
                  "id": "65529b445324bea305b93180"
                }
              },
              "dynamic": []
            }
          },
          "nodeID": "65529b445324bea305b9317e"
        },
        "65529b445324bea305b93182": {
          "type": "block",
          "data": {
            "name": "Template copy",
            "color": "",
            "steps": [
              "65529b445324bea305b9317e"
            ]
          },
          "nodeID": "65529b445324bea305b93182",
          "coords": [
            -203.86523965840297,
            -1040.0419762564647
          ]
        }
      },
      "offsetX": 272,
      "offsetY": 104,
      "modified": 1699999587,
      "creatorID": 299371,
      "variables": [],
      "menuItems": [],
      "_id": "659755d05643e2ffb19c1384",
      "diagramID": "6552806214b35500124bdae8",
      "versionID": "659755d05643e2ffb19c1381"
    }
  },
  "entities": [],
  "entityVariants": [],
  "intents": [
    {
      "id": "VF.YES",
      "environmentID": "659755d05643e2ffb19c1381",
      "name": "VF.YES",
      "createdByID": 299371,
      "description": null,
      "automaticReprompt": false,
      "entityOrder": [],
      "createdAt": "2024-01-05T01:05:26.000Z",
      "updatedAt": "2024-01-05T01:05:26.000Z",
      "folderID": null,
      "assistantID": "659755d05643e2ffb19c1380",
      "updatedByID": 299371
    },
    {
      "id": "VF.NO",
      "environmentID": "659755d05643e2ffb19c1381",
      "name": "VF.NO",
      "createdByID": 299371,
      "description": null,
      "automaticReprompt": false,
      "entityOrder": [],
      "createdAt": "2024-01-05T01:05:26.000Z",
      "updatedAt": "2024-01-05T01:05:26.000Z",
      "folderID": null,
      "assistantID": "659755d05643e2ffb19c1380",
      "updatedByID": 299371
    },
    {
      "id": "None",
      "environmentID": "659755d05643e2ffb19c1381",
      "name": "None",
      "createdByID": 299371,
      "description": null,
      "automaticReprompt": false,
      "entityOrder": [],
      "createdAt": "2024-01-05T01:05:26.000Z",
      "updatedAt": "2024-01-05T01:05:26.000Z",
      "folderID": null,
      "assistantID": "659755d05643e2ffb19c1380",
      "updatedByID": 299371
    }
  ],
  "utterances": [],
  "requiredEntities": [],
  "responses": [],
  "responseVariants": [],
  "responseAttachments": [],
  "responseDiscriminators": [],
  "attachments": [],
  "cardButtons": [],
  "project": {
    "type": "chat",
    "name": "assistant_geocode_weather",
    "image": "https://cm4-production-assets.s3.amazonaws.com/1699999622030-openai-logo.png",
    "teamID": "eaE00mgXE6",
    "members": [],
    "platform": "webchat",
    "_version": 1.2,
    "linkType": "STRAIGHT",
    "creatorID": 59189,
    "updatedBy": 299371,
    "platformData": {
      "invocationName": "template project general"
    },
    "customThemes": [
      {
        "name": "Logic",
        "palette": {
          "50": "#f4ebf6",
          "100": "#ecdef1",
          "200": "#e3cdea",
          "300": "#dabce3",
          "400": "#cca2d9",
          "500": "#bf87ce",
          "600": "#af68c1",
          "700": "#8b5299",
          "800": "#663a71",
          "900": "#402347"
        },
        "standardColor": "#bf87ce"
      }
    ],
    "aiAssistSettings": {
      "aiPlayground": true
    },
    "_id": "659755d05643e2ffb19c1380",
    "updatedAt": "2024-01-08T00:53:11.275Z",
    "knowledgeBase": {
      "settings": {
        "chunkStrategy": {
          "type": "recursive_text_splitter",
          "size": 1200,
          "overlap": 200
        },
        "search": {
          "limit": 3,
          "metric": "IP"
        },
        "summarization": {
          "prompt": "",
          "mode": "prompt",
          "model": "claude-instant-v1",
          "temperature": 0.1,
          "system": "You are an FAQ AI chat assistant. Information will be provided to help answer the user's questions. Always summarize your response to be as brief as possible and be extremely concise. Your responses should be fewer than a couple of sentences."
        }
      },
      "documents": {}
    },
    "devVersion": "659755d05643e2ffb19c1381"
  },
  "_version": "1.2",
  "variableStates": []
}
